{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?1662","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?3e3c","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?93e3","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?a504","uni-app:///pages/index/index.vue","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?9b58","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/index/index.vue?e42a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","visList","visnobook","vispopup","spbook","spindex","vismodalD","vismodalH","vismodalX","titlemodalX","options","text","style","backgroundColor","onReady","onShow","onUnload","console","onHide","onBackPress","onPullDownRefresh","computed","bookShelf","methods","toVisList","updateBookshelf","requests","book","newbook","chapter","Promise","then","uni","title","icon","catch","swipeChange","swipeClick","bookShow","getInfo","getInfo1","gomenu","handleDelete","confirmmodalD","cancelmodalD","closemodalD","handleClearCache","confirmmodalH","key","success","fail","cancelmodalH","closemodalH","handleDownload","count","confirmmodalX","bookall","originF","index","i","chapterId","cancelmodalX","closemodalX","handleShare","url","handleTxt","fileName","bookTxt","jsonString","plus","fs","create","fileEntry","writer","imgurl","bookname","author","toLocalURL","withSystemUI","err","popupclose","popupopen","goBookRead"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,mZAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,4KAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5FA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACqFtnB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IACA;MACA;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;UACAC;QACA;MACA;IACA;EACA;EACA;EACA;EAEA;EACA;EACA;EAEAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;EAAA,CACA;EACA;EACAC;IACAC;IACA;IACA;EACA;EACA;EACAC;IACAD;IACA;IACA;EACA;EACA;EACAE;IACAF;IACA;IACA;EACA;EACA;EACAG;IACA;IACA;EACA;EAEA;EACAC;IACAC;MACA;IACA;EACA;EAEAC;IACA;IACAC;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAC;kBAAA;oBAAA;oBAAA;sBAAA;wBAAA;0BAAA;4BACAC;4BAAA;4BAAA;4BAAA,OAEA;0BAAA;4BAAAC;4BACA;4BACA;8BACA;8BACAC;8BACA;gCACAA;8BACA;8BACAF;8BACA;8BACAA;8BACAA;8BACA;4BACA;4BAAA;4BAAA;0BAAA;4BAAA;4BAAA;4BAEAV;4BAAA;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CAGA;kBAAA;oBAAA;kBAAA;gBAAA;gBAEAa,sBACAC;kBACAC;oBACAC;oBACAC;kBACA;kBACAF;gBACA,GACAG;kBACAlB;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAmB;MACAnB;MACAA;IACA;IACAoB;MACApB;MACAA;MACAA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAqB;MACA;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;;MAEA;MACA;IACA;IACAC;MACA;MACA;MACA;MAEA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MAAA;MACA;MACA;IACA;IACAC;MACA;MACAzB;MACA;MACA;IACA;IACA;IACA0B;MAAA;MACA;MACA;QACA;UACAX;YACAC;YACAC;UACA;QAEA;UACA;UACAF;YACAC;YACAC;UACA;UACA;UACA;QACA;MAEA,GACAC;QACA;QACA;QACAH;UACAC;UACAC;QACA;MACA;MAAA;;MAEA;MACA;MACA;MACA;IACA;IACAU;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA7B;MACA;MACA;IACA;IAEA8B;MAAA;MACA;MACA;MACA;MACA;MACAf;QACAgB;QACAC;UACAjB;YACAC;YACAC;UACA;UACA;UACA;YACAL;UACA;UACA;UACA;QAEA;QACAqB;UACAlB;YACAC;YACAC;UACA;UACA;UACA;YACAL;UACA;UACA;UACA;QACA;MACA;MACA;MACA;MACA;IACA;IACAsB;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACApC;MACA;MACA;MACA;MACA;QAAA;MAAA;QACAqC;MACA;MACArC;MACA;MACA;MACA;MACA;IACA;IAEAsC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBAEA;gBACA;gBACAvB;kBACAC;kBACAC;gBACA;gBAGAc;gBACAQ;gBAEA;kBACAvC;kBACA;kBACA;kBACA;kBACA;kBACAuC;kBACAA;gBACA;gBAEAC;gBACAC;gBAEAC;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAEA9B;gBAAA,IAEAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAEA+B;gBACAH;gBAAA;gBAAA,OACA;cAAA;gBAAA9C;gBACA;kBACAM;gBACA;gBACA;gBACA;gBACA;gBACA;;gBAEA;gBACAuC;gBACA;gBACA;gBAEA;kBACA;kBACA;kBACAxB;kBACA;kBACA;gBACA;gBAEA;kBACA;kBACAA;kBACA;kBACA;kBACAA;oBACAC;oBACAC;kBACA;gBACA;gBACAjB;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAA;gBACAe;kBACAC;kBACAC;gBACA;gBACA;gBACAF;gBACA;gBACA;cAAA;gBAlDA2B;gBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAuDA;IACAE;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA9C;MAEAe;QACAgC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAlC;gBACA;kBACAd;kBACAiD;kBACAjD;kBACA+B,yCACA;kBACAmB;kBACAC;kBAEAC;oBACAC;sBACAC;oBACA;sBACAC;wBACAC;wBACAA;0BACAxD;0BACAA;0BAEA;4BACAyD;4BACAC;4BACAC;4BACAC;0BACA;0BAEA;;0BAEA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;0BACA;;0BAEA;0BACAR;4BACA;4BACA;8BAAA;8BACAA,sBACAG;gCACAM;8BACA;gCACA7D;8BACA;gCACAA,0BACA8D;8BACA;4BACA;0BACA;wBACA;wBAEAN;0BACAxD;0BACAoD;wBACA;sBACA;wBACApD;wBACAoD;sBACA;oBACA;sBACApD;sBACAoD;oBACA;kBACA;oBACApD;oBACAoD;kBACA;gBACA;kBACApD;kBACAoD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAW;MACA;MACA/D;IACA;IACA;IACAgE;MACAhE;IACA;IACA;IACAiE;MAEA;MACA;MACA;MACA;MACAlD;QACAgC;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACvkBA;AAAA;AAAA;AAAA;AAAqqC,CAAgB,snCAAG,EAAC,C;;;;;;;;;;;ACAzrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uniSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.vue\"\n      )\n    },\n    BookList: function () {\n      return import(\n        /* webpackChunkName: \"components/BookList/BookList\" */ \"@/components/BookList/BookList.vue\"\n      )\n    },\n    uBadge: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-badge/u-badge\" */ \"@/uni_modules/uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    Cpupup: function () {\n      return import(\n        /* webpackChunkName: \"components/Cpupup/Cpupup\" */ \"@/components/Cpupup/Cpupup.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.bookShelf.length\n  var g1 = _vm.bookShelf.length\n  var l0 = _vm.visList\n    ? _vm.__map(_vm.bookShelf, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m0 = _vm.getInfo(item)\n        var m1 = _vm.getInfo1(item)\n        return {\n          $orig: $orig,\n          m0: m0,\n          m1: m1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<!-- 导航栏 -->\r\n\t\t<view class=\"bar\">\r\n\t\t\t<view class=\"uni-bar\">\r\n\t\t\t\t<view @click=\"toVisList\" style=\"padding-top: 4px;\">\r\n\t\t\t\t\t<u-icon name=\"list-dot\" size=\"28px\" v-if=\"visList\"></u-icon>\r\n\t\t\t\t\t<u-icon name=\"grid-fill\" size=\"28px\" v-if=\"!visList\"></u-icon>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"uni-title\">\r\n\t\t\t\t\t我的书架\r\n\t\t\t\t\t<spen style=\"font-size: 14px;\">（共 {{bookShelf.length}} 本）</spen>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<navigator url=\"../search/search\" hover-stay-time=\"0\">\r\n\t\t\t\t\t<icon type=\"search\" color=\"#2f2f2f\"></icon>\r\n\t\t\t\t</navigator>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"0===bookShelf.length\" class=\"nobook\">\r\n\t\t\t<u-empty mode=\"data\" text=\"暂无书籍\">\r\n\t\t\t</u-empty>\r\n\t\t</view>\r\n\t\t<view class=\"yesbook\">\r\n\t\t\t<view v-if=\"visList\">\r\n\t\t\t\t<!-- 左滑组件 -->\r\n\t\t\t\t<uni-swipe-action-item v-for=\"(item, index) in bookShelf\" :right-options=\"options\" :key=\"item.bookurl\"\r\n\t\t\t\t\t@change=\"swipeChange($event, index)\" @click=\"swipeClick($event, index)\">\r\n\r\n\t\t\t\t\t<view class=\"bookList\" @longpress=\"gomenu(index)\">\r\n\t\t\t\t\t\t<view class=\"listleft\" @click=\"goBookRead(index)\">\r\n\t\t\t\t\t\t\t<BookList :imgurl=\"item.imgurl\" :title=\"item.bookname\" :info=\"getInfo(item)\"\r\n\t\t\t\t\t\t\t\t:info1=\"getInfo1(item)\" :isUpdated=\"item.isUpdated\">\r\n\t\t\t\t\t\t\t</BookList>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 详情图标 -->\r\n\t\t\t\t\t\t<view class=\"icon\">\r\n\t\t\t\t\t\t\t<view class=\"iconmin\" @click=\"gomenu(index)\">\r\n\t\t\t\t\t\t\t\t<u-icon name=\"more-dot-fill\" size=\"20\"></u-icon>\r\n\t\t\t\t\t\t\t\t<!-- <FontAwesome type=\"fa fa-ellipsis-h\" size=\"40\" color=\"#777\"></FontAwesome> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-swipe-action-item>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"book-container\">\r\n\t\t\t\t<view v-for=\"(item, index) in bookShelf\" :key=\"item.bookurl\" class=\"book-item\"\r\n\t\t\t\t\t@click=\"goBookRead(index)\" @longpress=\"gomenu(index)\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image :src=\"item.imgurl\" class=\"book-cover\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"book-name\">{{ item.bookname }}</view>\r\n\t\t\t\t\t<u-badge class=\"cont-badge\" :isDot=\"true\" type=\"error\" v-if=\"item.isUpdated\"></u-badge>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部弹窗 -->\r\n\t\t<u-popup :show=\"vispopup\" :round=\"10\" mode=\"bottom\" @close=\"popupclose\" @open=\"popupopen\">\r\n\t\t\t<Cpupup :spopupbook=\"spbook\" @delete=\"handleDelete\" @clearCache=\"handleClearCache\"\r\n\t\t\t\t@download=\"handleDownload\" @share=\"handleShare\" @txt=\"handleTxt\">\r\n\t\t\t</Cpupup>\r\n\t\t</u-popup>\r\n\r\n\t\t<!-- 确认删除弹窗 -->\r\n\t\t<u-modal :show=\"vismodalD\" title=\"确定要删除本书吗？\" showCancelButton closeOnClickOverlay :zoom=\"false\"\r\n\t\t\t@cancel=\"cancelmodalD\" @confirm=\"confirmmodalD\" @close=\"closemodalD\"></u-modal>\r\n\r\n\t\t<!-- 确认清除全部缓存弹窗 -->\r\n\t\t<u-modal :show=\"vismodalH\" title=\"确定要清除全部缓存吗？\" showCancelButton closeOnClickOverlay :zoom=\"false\"\r\n\t\t\t@cancel=\"cancelmodalH\" @confirm=\"confirmmodalH\" @close=\"closemodalH\"></u-modal>\r\n\r\n\t\t<!-- 确认缓存弹窗 -->\r\n\t\t<u-modal :show=\"vismodalX\" :title=\"titlemodalX\" showCancelButton closeOnClickOverlay :zoom=\"false\"\r\n\t\t\t@cancel=\"cancelmodalX\" @confirm=\"confirmmodalX\" @close=\"closemodalX\"></u-modal>\r\n\t</view>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport store from \"@/store/index.js\"\r\n\timport HTMLParser from \"@/uni_modules/html-parser/js_sdk/index.js\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//书架列表\r\n\t\t\t\t// bookShelf: [],\r\n\t\t\t\t//列表格式？\r\n\t\t\t\tvisList: true,\r\n\t\t\t\t//书架里没有书\r\n\t\t\t\tvisnobook: false,\r\n\t\t\t\t//是否显示底部弹窗\r\n\t\t\t\tvispopup: false,\r\n\t\t\t\t//在哪本书打开的弹窗\r\n\t\t\t\tspbook: {},\r\n\t\t\t\t//在书架中的索引\r\n\t\t\t\tspindex: -1,\r\n\t\t\t\t// 删除确认弹窗\r\n\t\t\t\tvismodalD: false,\r\n\t\t\t\tvismodalH: false,\r\n\t\t\t\tvismodalX: false,\r\n\t\t\t\ttitlemodalX: \"确定要缓存全部章节吗？\",\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\ttext: '删除',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\tbackgroundColor: 'rgb(255,58,49)'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t}\r\n\t\t},\r\n\t\t// onLoad()  {\r\n\t\t// \tconsole.log(\"页面加载\");\r\n\r\n\t\t// \t// 检查更新\r\n\t\t// \tthis.updateBookshelf()\r\n\t\t// },\r\n\t\t\r\n\t\tonReady() {\r\n\t\t\t// 检查更新\r\n\t\t\tthis.updateBookshelf()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// //页面显示时就刷新值\r\n\t\t\t// this.bookShow()\r\n\t\t\t// //将数据缓存\r\n\t\t\t// this.$store.commit('setBookShelfFromStorage')\r\n\t\t},\r\n\t\t//组件被销毁\r\n\t\tonUnload() {\r\n\t\t\tconsole.log(\"组件被销毁\");\r\n\t\t\t// //将数据缓存\r\n\t\t\t// this.$store.commit('setBookShelfFromStorage')\r\n\t\t},\r\n\t\t//组件被隐藏\r\n\t\tonHide() {\r\n\t\t\tconsole.log(\"组件被隐藏\");\r\n\t\t\t// //将数据缓存\r\n\t\t\t// this.$store.commit('setBookShelfFromStorage')\r\n\t\t},\r\n\t\t// 退出页面时的操作\r\n\t\tonBackPress(options) {\r\n\t\t\tconsole.log(\"我退出啦\");\r\n\t\t\t//将数据缓存\r\n\t\t\t// this.$store.commit('setBookShelfFromStorage')\r\n\t\t},\r\n\t\t//监听用户下拉刷新动作\r\n\t\tonPullDownRefresh() {\r\n\t\t\t// 检查更新\r\n\t\t\tthis.updateBookshelf()\r\n\t\t},\r\n\r\n\t\t//计算属性\r\n\t\tcomputed: {\r\n\t\t\tbookShelf() {\r\n\t\t\t\treturn this.$store.state.bookShelf.slice().reverse();\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 切换列表宫格格式\r\n\t\t\ttoVisList() {\r\n\t\t\t\tthis.visList = !this.visList\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 检查更新\r\n\t\t\t * */\r\n\t\t\tasync updateBookshelf() {\r\n\r\n\t\t\t\tconst requests = this.$store.state.bookShelf.map(async config => {\r\n\t\t\t\t\tlet book = config;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst newbook = await this.$getNetwork.homePage(book);\r\n\t\t\t\t\t\t// 新获取的目录更多了===更新了\r\n\t\t\t\t\t\tif (newbook.chapters.length > book.chapters.length) {\r\n\t\t\t\t\t\t\t// 要用一个变量中转一下，否则报错没有book.chapters.push这个函数\r\n\t\t\t\t\t\t\tlet chapter = book.chapters;\r\n\t\t\t\t\t\t\tfor (let k = book.chapters.length; k < newbook.chapters.length; k++) {\r\n\t\t\t\t\t\t\t\tchapter.push(newbook.chapters[k]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbook.chapters = chapter;\r\n\t\t\t\t\t\t\t// 标记为已经更新\r\n\t\t\t\t\t\t\tbook.isUpdated = true;\r\n\t\t\t\t\t\t\tbook.readAll = newbook.chapters.length;\r\n\t\t\t\t\t\t\tthis.$store.commit(\"modifyBook\", book)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error(\"Error occurred while fetching book details:\", error);\r\n\t\t\t\t\t\tthrow error; // 在Promise链中抛出错误，以便在Promise.all的catch中捕获  \r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tPromise.all(requests)\r\n\t\t\t\t\t.then(results => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"刷新成功\",\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.stopPullDownRefresh(); //停止刷新  \r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(\"请求错误:\", error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tswipeChange(e, index) {\r\n\t\t\t\tconsole.log('返回：' + e);\r\n\t\t\t\tconsole.log('当前索引：' + index);\r\n\t\t\t},\r\n\t\t\tswipeClick(e, index) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconsole.log('返回：' + e.content.text);\r\n\t\t\t\tconsole.log('当前索引：' + index);\r\n\t\t\t\tif (0 == e.index) {\r\n\t\t\t\t\t//传过来的是倒序的索引，需要转变成在vuex中的索引\r\n\t\t\t\t\tthis.spindex = this.bookShelf.length - 1 - index\r\n\t\t\t\t\t//选中了哪本书\r\n\t\t\t\t\tthis.spbook = this.bookShelf[index];\r\n\t\t\t\t\t// 调用删除\r\n\t\t\t\t\tthis.handleDelete();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbookShow() {\r\n\t\t\t\t//刷新书架\r\n\t\t\t\t//得到的是倒序\r\n\t\t\t\t// this.bookShelf = this.$store.state.bookShelf.slice().reverse();\r\n\t\t\t\tif (this.bookShelf.length === 0) {\r\n\t\t\t\t\tthis.visnobook = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.visnobook = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetInfo(item) {\r\n\t\t\t\t// \tconst readIndex = item.readIndex + 1;\r\n\t\t\t\t// \tconst readAll = item.readAll;\r\n\t\t\t\t// \tconst readPercent = (readIndex * 100) / readAll;\r\n\r\n\t\t\t\t// \treturn `作者：${item.author}\\n读到 ${readIndex} 章 共 ${readAll} 章 ${readPercent.toFixed(2)}%`;\r\n\t\t\t\treturn `最新章节：${item.chapters[item.chapters.length-1].chaptername}`;\r\n\t\t\t},\r\n\t\t\tgetInfo1(item) {\r\n\t\t\t\tconst readIndex = item.readIndex + 1;\r\n\t\t\t\tconst readAll = item.readAll;\r\n\t\t\t\tconst readPercent = (readIndex * 100) / readAll;\r\n\r\n\t\t\t\treturn `读到 ${readIndex} 章 共 ${readAll} 章 ${readPercent.toFixed(2)}%`;\r\n\t\t\t},\r\n\t\t\t//点击了三个点\r\n\t\t\tgomenu(index) {\r\n\t\t\t\t//传过来的是倒序的索引，需要转变成在vuex中的索引\r\n\t\t\t\tthis.spindex = this.bookShelf.length - 1 - index\r\n\t\t\t\t//选中了哪本书\r\n\t\t\t\tthis.spbook = this.bookShelf[index];;\r\n\t\t\t\t// 打开菜单弹窗\r\n\t\t\t\tthis.vispopup = true;\r\n\t\t\t},\r\n\t\t\thandleDelete() {\r\n\t\t\t\t// 处理删除事件的逻辑\r\n\t\t\t\tconsole.log(\"删除事件被触发\");\r\n\t\t\t\t// 弹出确定弹窗\r\n\t\t\t\tthis.vismodalD = true\r\n\t\t\t},\r\n\t\t\t//点击了确定删除\r\n\t\t\tconfirmmodalD() {\r\n\t\t\t\t//找到这本书的索引并删除\r\n\t\t\t\tthis.$store.dispatch('deleteBook', this.spbook.bookurl).then(index => {\r\n\t\t\t\t\t\tif (-1 === index) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '删除失败,书架内没有这本书',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//消息提示\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t//刷新书架\r\n\t\t\t\t\t\t\tthis.bookShow()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t// 异常情况的处理\r\n\t\t\t\t\t\t//消息提示\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '删除失败,书架内没有这本书' + error,\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});;\r\n\r\n\t\t\t\t//隐藏弹窗\r\n\t\t\t\tthis.vismodalD = false;\r\n\t\t\t\t//隐藏菜单\r\n\t\t\t\tthis.vispopup = false;\r\n\t\t\t},\r\n\t\t\tcancelmodalD() {\r\n\t\t\t\t//点击了取消\r\n\t\t\t\t//隐藏弹窗\r\n\t\t\t\tthis.vismodalD = false;\r\n\t\t\t},\r\n\t\t\tclosemodalD() {\r\n\t\t\t\t//遮罩层关闭\r\n\t\t\t\tthis.vismodalD = false;\r\n\t\t\t},\r\n\r\n\t\t\thandleClearCache() {\r\n\t\t\t\t// 处理清除缓存事件的逻辑\r\n\t\t\t\tconsole.log(\"清除缓存事件被触发\");\r\n\t\t\t\t// 弹窗\r\n\t\t\t\tthis.vismodalH = true;\r\n\t\t\t},\r\n\r\n\t\t\tconfirmmodalH() {\r\n\t\t\t\t// 确认按钮点击事件处理逻辑\r\n\t\t\t\t// 在这里进行清除缓存的操作\r\n\t\t\t\tconst key = \"bookall\" + this.spbook.bookurl;\r\n\t\t\t\t// 同时清空缓存\r\n\t\t\t\tuni.removeStorage({\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"缓存清除成功\",\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 全取消\r\n\t\t\t\t\t\tthis.spbook.chapters.forEach(chapter => {\r\n\t\t\t\t\t\t\tchapter.visD = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 更新\r\n\t\t\t\t\t\tthis.$store.commit('modifyBook', this.spbook)\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: \"这本书已经没有缓存啦\",\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 全取消\r\n\t\t\t\t\t\tthis.spbook.chapters.forEach(chapter => {\r\n\t\t\t\t\t\t\tchapter.visD = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// 更新\r\n\t\t\t\t\t\tthis.$store.commit('modifyBook', this.spbook)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.vismodalH = false;\r\n\t\t\t\t//隐藏菜单\r\n\t\t\t\tthis.vispopup = false;\r\n\t\t\t},\r\n\t\t\tcancelmodalH() {\r\n\t\t\t\t// 取消按钮点击事件处理逻辑\r\n\t\t\t\tthis.vismodalH = false;\r\n\t\t\t},\r\n\t\t\tclosemodalH() {\r\n\t\t\t\t// 弹窗关闭事件处理逻辑\r\n\t\t\t\tthis.vismodalH = false;\r\n\t\t\t},\r\n\r\n\t\t\thandleDownload() {\r\n\t\t\t\tconsole.log(\"下载事件被触发\");\r\n\t\t\t\t// 计算有多少章没有下载\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\t//查找具有visD属性且值为true的元素数量\r\n\t\t\t\tthis.spbook.chapters.filter(chapter => chapter.visD === true).forEach(chapter => {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(count);\r\n\t\t\t\tlet time = `${((this.spbook.chapters.length - count) * 0.5).toFixed(2)}`;\r\n\t\t\t\tthis.titlemodalX = \"确定要缓存全部章节吗？\\n预计需要 \" + time + \" s\"\r\n\t\t\t\t// 弹窗\r\n\t\t\t\tthis.vismodalX = true;\r\n\t\t\t},\r\n\r\n\t\t\tasync confirmmodalX() {\r\n\t\t\t\tthis.vismodalX = false;\r\n\r\n\t\t\t\t// 确认按钮点击事件处理逻辑\r\n\t\t\t\t// 在这里进行下载的操作\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '开始下载啦',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tconst key = \"bookall\" + this.spbook.bookurl;\r\n\t\t\t\tlet bookall = uni.getStorageSync(key);\r\n\r\n\t\t\t\tif (!bookall) {\r\n\t\t\t\t\tconsole.log(\"缓存数据为空\");\r\n\t\t\t\t\t// // 走缓存中转一下，否则引用的是同一个对象\r\n\t\t\t\t\t// uni.setStorageSync(key, this.spbook);\r\n\t\t\t\t\t// // 使用同步读取！！\r\n\t\t\t\t\t// bookall = uni.getStorageSync(key);\r\n\t\t\t\t\tbookall = JSON.parse(JSON.stringify(this.spbook));\r\n\t\t\t\t\tbookall.progress = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst originF = bookall.origin;\r\n\t\t\t\tconst index = this.$store.state.origins.indexOf(originF);\r\n\r\n\t\t\t\tfor (let i = 0; i < bookall.chapters.length; i++) {\r\n\r\n\t\t\t\t\tconst chapter = bookall.chapters[i];\r\n\r\n\t\t\t\t\tif (!chapter.hasOwnProperty('text')) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst chapterId = chapter.chapterurl;\r\n\t\t\t\t\t\t\tconst originF = this.spbook.origin\r\n\t\t\t\t\t\t\tconst text = await this.$getNetwork.read(originF, chapterId)\r\n\t\t\t\t\t\t\tif (-1 == text) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"网络请求错误\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t\t\t// \ttitle: '正在下载第 ' + (i + 1) + ' 章',\r\n\t\t\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t\t\t// });\r\n\r\n\t\t\t\t\t\t\t//添加数据\r\n\t\t\t\t\t\t\tbookall.chapters[i]['text'] = text;\r\n\t\t\t\t\t\t\t//标记为已经下载\r\n\t\t\t\t\t\t\tthis.spbook.chapters[i]['visD'] = true;\r\n\r\n\t\t\t\t\t\t\tif ((i + 1) % 10 === 0) {\r\n\t\t\t\t\t\t\t\t// 每10次执行一次逻辑\r\n\t\t\t\t\t\t\t\t// 缓存\r\n\t\t\t\t\t\t\t\tuni.setStorageSync(key, bookall);\r\n\t\t\t\t\t\t\t\t// 更新\r\n\t\t\t\t\t\t\t\tthis.$store.commit('modifyBook', this.spbook)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (bookall.chapters.length - 1 === i) {\r\n\t\t\t\t\t\t\t\t// 缓存\r\n\t\t\t\t\t\t\t\tuni.setStorageSync(key, bookall);\r\n\t\t\t\t\t\t\t\t// 更新\r\n\t\t\t\t\t\t\t\tthis.$store.commit('modifyBook', this.spbook)\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '全部下载完成',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(i);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '错误' + e.message,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// 缓存\r\n\t\t\t\t\t\t\tuni.setStorageSync(key, bookall);\r\n\t\t\t\t\t\t\t// 更新\r\n\t\t\t\t\t\t\tthis.$store.commit('modifyBook', this.spbook)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tcancelmodalX() {\r\n\t\t\t\t// 取消按钮点击事件处理逻辑\r\n\t\t\t\tthis.vismodalX = false;\r\n\t\t\t},\r\n\t\t\tclosemodalX() {\r\n\t\t\t\t// 弹窗关闭事件处理逻辑\r\n\t\t\t\tthis.vismodalX = false;\r\n\t\t\t},\r\n\r\n\t\t\thandleShare() {\r\n\t\t\t\t// 处理打开目录的逻辑\r\n\t\t\t\tconsole.log(\"打开目录被触发\");\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/bookChapter/bookChapter?index=${this.spindex}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync handleTxt() {\r\n\t\t\t\tlet then = this;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log(this.spbook);\r\n\t\t\t\t\tconst fileName = this.spbook.bookname.trim() + '.txt';\r\n\t\t\t\t\tconsole.log(fileName);\r\n\t\t\t\t\tconst key = 'bookall' + this.spbook.bookurl;\r\n\t\t\t\t\t// 使用同步读取\r\n\t\t\t\t\tconst bookTxt = uni.getStorageSync(key);\r\n\t\t\t\t\tconst jsonString = JSON.stringify(bookTxt);\r\n\r\n\t\t\t\t\tplus.io.requestFileSystem(plus.io.PUBLIC_DOWNLOADS, (fs) => {\r\n\t\t\t\t\t\tfs.root.getFile(fileName, {\r\n\t\t\t\t\t\t\tcreate: true\r\n\t\t\t\t\t\t}, (fileEntry) => {\r\n\t\t\t\t\t\t\tfileEntry.createWriter((writer) => {\r\n\t\t\t\t\t\t\t\twriter.write(jsonString);\r\n\t\t\t\t\t\t\t\twriter.onwriteend = () => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('写入文件成功', fileEntry.fullPath);\r\n\t\t\t\t\t\t\t\t\tconsole.log(fileEntry.toLocalURL());\r\n\r\n\t\t\t\t\t\t\t\t\tconst bookTxt = {\r\n\t\t\t\t\t\t\t\t\t\timgurl: this.spbook.imgurl,\r\n\t\t\t\t\t\t\t\t\t\tbookname: this.spbook.bookname,\r\n\t\t\t\t\t\t\t\t\t\tauthor: this.spbook.author,\r\n\t\t\t\t\t\t\t\t\t\ttoLocalURL: fileEntry.toLocalURL()\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tthis.$store.commit('addBookTxts', bookTxt);\r\n\r\n\t\t\t\t\t\t\t\t\t// fileEntry.file((file) => {\r\n\t\t\t\t\t\t\t\t\t// \tconst fileReader = new plus.io\r\n\t\t\t\t\t\t\t\t\t// \t\t.FileReader();\r\n\t\t\t\t\t\t\t\t\t// \tfileReader.onloadend = () => {\r\n\t\t\t\t\t\t\t\t\t// \t\tconst fileContent = fileReader\r\n\t\t\t\t\t\t\t\t\t// \t\t\t.result;\r\n\t\t\t\t\t\t\t\t\t// \t\tconsole.log('读取文件内容：',\r\n\t\t\t\t\t\t\t\t\t// \t\t\tfileContent);\r\n\t\t\t\t\t\t\t\t\t// \t};\r\n\t\t\t\t\t\t\t\t\t// \tfileReader.readAsText(file, 'utf-8');\r\n\t\t\t\t\t\t\t\t\t// });\r\n\r\n\t\t\t\t\t\t\t\t\t// 弹窗提示文件保存成功\r\n\t\t\t\t\t\t\t\t\tplus.nativeUI.confirm('文件保存成功！', (e) => {\r\n\t\t\t\t\t\t\t\t\t\tconst openIndex = e.index;\r\n\t\t\t\t\t\t\t\t\t\tif (openIndex === 1) { // 点击打开按钮\r\n\t\t\t\t\t\t\t\t\t\t\tplus.runtime.openFile(\r\n\t\t\t\t\t\t\t\t\t\t\t\tfileEntry.toLocalURL(), {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twithSystemUI: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, (e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('打开文件成功', e);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('打开文件发生错误',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\terr);\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}, '提示', ['确定', '打开']);\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\twriter.onerror = (err) => {\r\n\t\t\t\t\t\t\t\t\tconsole.error('写入文件发生错误', err);\r\n\t\t\t\t\t\t\t\t\tplus.nativeUI.alert('写入文件发生错误：' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\t\tconsole.error('创建文件写入器发生错误', err);\r\n\t\t\t\t\t\t\t\tplus.nativeUI.alert('创建文件写入器发生错误：' + JSON.stringify(err));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\t\tconsole.error('获取文件条目发生错误', err);\r\n\t\t\t\t\t\t\tplus.nativeUI.alert('获取文件条目发生错误：' + JSON.stringify(err));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tconsole.error('请求文件系统发生错误', err);\r\n\t\t\t\t\t\tplus.nativeUI.alert('请求文件系统发生错误：' + JSON.stringify(err));\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('操作文件发生错误', err);\r\n\t\t\t\t\tplus.nativeUI.alert('操作文件发生错误：' + JSON.stringify(err));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//关闭菜单弹窗\r\n\t\t\tpopupclose() {\r\n\t\t\t\tthis.vispopup = false\r\n\t\t\t\tconsole.log(\"菜单弹窗关闭啦\");\r\n\t\t\t},\r\n\t\t\t//打开了菜单弹窗\r\n\t\t\tpopupopen() {\r\n\t\t\t\tconsole.log(\"菜单弹窗打开啦\");\r\n\t\t\t},\r\n\t\t\t//点击了跳转阅读页\r\n\t\t\tgoBookRead(index) {\r\n\r\n\t\t\t\t//传过来的是倒序的索引，需要转变成在vuex中的索引\r\n\t\t\t\tconst bookShelfIndex = this.bookShelf.length - 1 - index\r\n\t\t\t\tconst readIndex = this.bookShelf[index].readIndex\r\n\t\t\t\t// 阅读页面需要两个值，在书架中的索引以及点的是第几章的索引\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/bookRead/bookRead?bookShelfIndex=${bookShelfIndex}&readIndex=${readIndex}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.bar {\r\n\t\tz-index: 9999;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground-color: #ffffff;\r\n\r\n\r\n\t\t.uni-bar {\r\n\t\t\t// border-bottom: 0.5px solid #ccc;\r\n\t\t\tbackground-color: #ffffff;\r\n\t\t\t// border-bottom: 1px solid #8c8c8c;\r\n\t\t\tmargin-top: 30px;\r\n\t\t\tmargin-left: 30rpx;\r\n\t\t\tmargin-right: 35rpx;\r\n\t\t\theight: 44px;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\t// padding: 0 20rpx;\r\n\r\n\t\t\t/* 设置标题样式 */\r\n\t\t\t.uni-title {\r\n\t\t\t\tfont-size: 20px;\r\n\t\t\t\tcolor: #2f2f2f;\r\n\t\t\t\t// font-weight: bold;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.nobook {\r\n\t\tpadding-top: 150rpx;\r\n\t\tmargin-top: 200rpx;\r\n\t\theight: 500rpx;\r\n\t\tdisplay: flex;\r\n\t\t// 水平居中\r\n\t\tjustify-content: center;\r\n\t\t// 垂直居中\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.yesbook {\r\n\t\tpadding-top: 80px;\r\n\r\n\t\t// .book-container {\r\n\t\t// \tdisplay: flex;\r\n\t\t// \tflex-wrap: wrap;\r\n\t\t// \t// justify-content: space-between;\r\n\t\t// \tjustify-content: flex-start;\r\n\t\t// \t/* 从左到右排列 */\r\n\t\t// \tpadding: 10px;\r\n\t\t// \t// flex-direction: row; // 从左往右排列 \r\n\r\n\t\t// \t.cont-badge {\r\n\t\t// \t\tposition: relative;\r\n\t\t// \t\ttop: -97%;\r\n\t\t// \t\tmargin-left: 90%;\r\n\t\t// \t}\r\n\r\n\t\t// \t.book-item {\r\n\t\t// \t\tflex: 1;\r\n\t\t// \t\t// flex-basis: 33%;\r\n\t\t// \t\tpadding: 4px;\r\n\t\t// \t\tmargin-bottom: 4px;\r\n\t\t// \t\t// width: 33%;\r\n\t\t// \t\tmax-width: 33%;\r\n\t\t// \t\tbox-sizing: border-box;\r\n\t\t// \t\t// 居中对齐\r\n\t\t// \t\ttext-align: center;\r\n\r\n\t\t// \t\t.book-cover {\r\n\t\t// \t\t\twidth: 92px;\r\n\t\t// \t\t\tmax-width: 100%;\r\n\t\t// \t\t\theight: 128px;\r\n\t\t// \t\t\tbox-shadow: -2px 2px 2px rgba(0, 0, 0, 0.2);\r\n\t\t// \t\t\tborder-radius: 5px;\r\n\t\t// \t\t\tbackground-color: #efefef;\r\n\t\t// \t\t}\r\n\r\n\t\t// \t\t.book-name {\r\n\t\t// \t\t\tfont-size: 14px;\r\n\t\t// \t\t\toverflow: hidden;\r\n\t\t// \t\t\twhite-space: nowrap;\r\n\t\t// \t\t\ttext-overflow: ellipsis;\r\n\t\t// \t\t\tcolor: #555;\r\n\t\t// \t\t\ttext-align: center;\r\n\t\t// \t\t}\r\n\r\n\r\n\t\t// \t}\r\n\t\t// }\r\n\r\n\t\t.book-container {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3, 30%);\r\n\t\t\tmargin-left: 5%;\r\n\t\t\t/* 创建三列，每列宽度相等 */\r\n\t\t\tgrid-gap: 8px;\r\n\t\t\t/* 设置网格线之间的间距 */\r\n\t\t}\r\n\r\n\t\t.cont-badge {\r\n\t\t\tposition: relative;\r\n\t\t\ttop: -98%;\r\n\t\t\tmargin-left: 95%;\r\n\t\t}\r\n\r\n\t\t.book-item {\r\n\t\t\tpadding: 4px;\r\n\t\t\t// margin-bottom: 4px;\r\n\t\t\tmax-width: 100%;\r\n\t\t\t/* 根据需要调整最大宽度 */\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\ttext-align: center;\r\n\t\t\tdisplay: block;\r\n\t\t\t/* 将元素设置为块元素 */\r\n\t\t\tmargin-left: auto;\r\n\t\t\t/* 水平居中 */\r\n\t\t\tmargin-right: auto;\r\n\t\t}\r\n\r\n\t\t.book-cover {\r\n\t\t\twidth: 92px;\r\n\t\t\tmax-width: 100%;\r\n\t\t\theight: 128px;\r\n\t\t\tbox-shadow: -2px 2px 2px rgba(0, 0, 0, 0.2);\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbackground-color: #efefef;\r\n\t\t}\r\n\r\n\t\t.book-name {\r\n\t\t\tfont-size: 14px;\r\n\t\t\toverflow: hidden;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tcolor: #555;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.bookList {\r\n\t\t\tdisplay: flex;\r\n\t\t\t// 左右排列\r\n\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t.listleft {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.icon {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\t// 水平居中\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t// 垂直居中\r\n\t\t\t\talign-items: center;\r\n\t\t\t\twidth: 15%;\r\n\r\n\t\t\t\t.iconmin {\r\n\t\t\t\t\theight: 30px;\r\n\t\t\t\t\tmargin-right: 40rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1714955546633\n      var cssReload = require(\"D:/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}