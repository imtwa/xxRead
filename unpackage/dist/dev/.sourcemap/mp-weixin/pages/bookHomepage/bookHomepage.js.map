{"version":3,"sources":["uni-app:///main.js","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?3a30","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?3ab7","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?ccea","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?d25f","uni-app:///pages/bookHomepage/bookHomepage.vue","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?4a09","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?d14c","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?ead1","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?e94e","uni-app:///pages/bookRead/bookRead.vue","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?0198","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookRead/bookRead.vue?5ff6","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?5bed","webpack:///D:/HBuilderX.3.8.7.20230703/uniapp项目/XX阅读/pages/bookHomepage/bookHomepage.vue?af86"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","virtualList","data","book","vis","loading","list4","name","addList","text","addid","uToastList","type","position","message","duration","bookShelfIndex","scrollHeight","onLoad","uni","windowHeight","windowWidth","onShow","catch","methods","getSourceName","goclick","addclick","goread","url","gochapter","console","rIndex","fetchData","newbook","Object","title","icon","battery","bookall","bookName","bookId","history","chapterIndex","progress","directoryList","currentPage","refreshData","innerHeight","preChapter","ready","chapterName","totalPage","canRead","curChapter","nextChapter","tmpChapter","cover","pageTranslate","prePage","pageNum","curPage","nextPage","next","pre","waitForNext","waitForPre","waitForNextChapter","waitForPreChapter","showAnimation","showShadow","contentHeight","platform","batteryState","batteryLevel","systemTime","systemTimeStr","statusBarHeight","pixelRatio","IntervalTime","touchStartX","touchX","delta","touchStartY","touchY","menuShow","itemShow","settingShow","directoryShow","directoryShowBefore","turnPageTime","maxFontSize","minFontSize","turnType","fontSize","simplified","lineHeight","background","colorList","chapterProgress","progressTouched","key","success","fail","complete","plus","onUnload","clearInterval","onHide","onBackPress","mounted","computed","directoryListItemColor","handleKeyDown","handleLongpressed","setStorage","back","getSystemInfo","initPage","mask","page","calcHeight","query","resolve","calcCurChapter","setTimeout","height","calcPreChapter","calcNextChapter","coverTouchStart","coverTouchMove","coverTouchEnd","clientX","coverTouchcancel","touchStart","touchMove","touchEnd","touchcancel","showMenu","closeMenu","refreshPageData","openSetting","openDirectory","slideChanging","slideChange","goPrePage","showChapter","goNextPage","chapterRotate","chapterId","isEnd","isCover","goNextChapter","goPreChapter","goToPage","goToChapter","bigSize","smallSize","changeFont","changeLineHeight","changeTurnType","changeBackground","getDirectoryList","index","buyBook","getOneChapter","chapindex","i","originF","getText","getThreeChapter"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AAAA;AAAymB,CAAgB,snBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACuF7nB;AACA;AACA;AAEA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACA;MACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;MACA;QACAA;MACA;MAEA;MACAC;QACAD;QACAE;MACA,GACA;QACAF;QACAE;MACA,EACA;MACA;MACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACA;QACAC;MACA;QACAH;QACAC;QACAC;QACA;QACAC;MACA;MACA;MACAC;MACAC;IACA;EACA;EAEA;EACAC;IACA;IACA;;IAEA;IACA;IACA;IACA;IAEA,4BAGAC;MAFAC;MACAC;IAEA;IACA;IACA;IACA;IACA;EACA;EACA;EACAC;IAAA;IAEA;IACA;MAEA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;MAEA;QACA;QACA;QACA;QACA;MACA;IAEA,GACAC;MACA;IAAA,CACA;IAAA;EACA;EAEAC;IAEA;IACAC;MAAA;MACA;QAAA;MAAA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;;QAEA;QACA;UAEA;QACA,GACAJ;UACA;QAAA,CACA;QAAA;MAGA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;;MAEA;MACA,yCACA,6BACA;IAEA;IAEA;IACAK;MAAA;MAEA;QACA;QACA;QACAT;UACAU;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QAEA;;QAEA;QACA;UAEA;UACA;UACA;;UAEA;UACAV;YACAU;UACA;QAEA,GACAN;UACA;QAAA,CACA;QAAA;MACA;IAEA;IAEA;IACAO;MAAA;MACAC;MAEAC;QAAA;MAAA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;QAEA;QACA;QACA;QAEAb;UACAU;QACA;MACA;QACA;QACA;QACA;QACA;UAEA;;UAEA;UACAV;YACAU;UACA;QAEA;UACA;QAAA,CACA;QAAA;MACA;IACA;IAGA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;gBACA;kBACA;kBACAC;kBACA;kBACA;kBACA;kBACA;gBAEA;kBACAhB;oBACAiB;oBACAC;kBACA;gBACA;;gBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9YA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAqmB,CAAgB,knBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC0UznB;AAMA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACArC;IACAsC;IACArC;EACA;EAEAC;IACA;MACAC;MACAoC;MACAC;MACAC;MACAC;QAAA;QACAC;QACAC;MACA;MACAnC;MACAoC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;QAAA;QACAC;QAAA;QACAP;QACAQ;QACA1C;QACA2C;QACAC;MACA;MAEAC;QAAA;QACAX;QACAQ;QACA1C;QACA2C;QACAC;MACA;MAEAE;QAAA;QACAL;QAAA;QACAP;QACAQ;QACA1C;QACA2C;QACAC;MACA;MAEAG;QAAA;QACA/C;QACA4C;MACA;MAEAI;QAAA;QACAC;MACA;;MAEAC;QAAA;QACAT;QAAA;QACAC;QACA1C;QACAmD;QACAR;QACAM;QAAA;QACAL;MACA;MAEAQ;QAAA;QACAX;QAAA;QACAC;QACA1C;QACAmD;QACAR;QACAM;QAAA;QACAL;MACA;MAEAS;QAAA;QACAZ;QAAA;QACAC;QACA1C;QACAmD;QACAR;QACAM;QAAA;QACAL;MACA;MAGAU;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAjD;MAAA;MACAD;MAAA;MACAmD;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;IAEA;EACA;EACAlF;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACAC;MACAiB;MACAC;IACA;IAEA;IACA;IACAlB;MACAkF;MACAC;QACA;QACA;UACA;UACA;;UAEA;UACA;UACA;UACA;;UAEA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACA;YACA;YACA;UACA;QACA;MACA;;MACAC;QACA;QACAxE;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;MACA;MACAyE;QACA;QACA;;QAEA;QACA;QACA;MACA;IACA;;IAEA;IACAC;IACA;IACAA;;IAEA;IACA;IACA;IACA;IACA;IACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EAEA;EACAnF,2BAEA;EACA;EACAoF;IAOA;IACA;IACA;IACAD;IACAA;IACA;IACAE;EACA;EACA;EACAC;IACA;IACA;EACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;EAAA,CACA;EAEAC;IAEAnE;MAAA;MACA;QACA;MACA;MACA;IACA;IACA;IACAoE;MAAA;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MAEA;IACA;EACA;;EACAxF;IACAyF;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEAhG;QACAkF;QACAnG;QACAoG;UACAvE;QACA;MACA;IACA;IAEA;AACA;AACA;IACAqF;MACAjG;IACA;IAEA;AACA;AACA;IACAkG;MAEA,4BAMAlG;QALAE;QACAD;QACAyD;QACAL;QACAM;MAEA;MACA;MACA;MACA;MACA;MACA;;MA2CA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAGA;;MAEA;MACA;MACA;;MAEA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACAnC;QACAC;MACA;;MAEA;MACA;MACA;IAEA;IAEA;AACA;AACA;IACA0E;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAnG;kBACAiB;kBACAmF;gBACA;gBACA,yCACA,0CACA,4CACA,6BACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAEA,qFACA5E;kBACA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBACA6E;gBACA;gBACArG;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;AACA;AACA;IACAsG;MAAA;MACA;QACA;QAEAzB;QAEA,yFACA,MACAA;QACA;MACA;QACA;UACA;YACA;YACA0B;cACA;cACA;cACA;cAGA1B,0DACA,OACAlB;cAEA,+CACAkB,oBACAF;cACA;cACA6B;YACA;UACA;QAEA;MACA;IAEA;IAEA;AACA;AACA;IACAC;MAAA;MACA;QACA;QACAC;UACA;UACAH;YACA;YAGAI,yDACAhD;YAEA,wDACA9B;YACA;YACA2E;UACA;QACA;MAEA;IACA;IAEA;AACA;AACA;IACAI;MAAA;MACA;QACA;QACAF;UACA;UACAH;YACA;YAEAI,yDACAhD;YAEA,wDACA9B;YACA;YACA;cAAA;cACA7B;cACA;cACA;cACA;YACA;YACA;cACAA;cACA;cACA;YACA;YACAwG;UACA;QACA;MAEA;IAEA;IAEA;AACA;AACA;IACAK;MAAA;MACA;QACA;QACAH;UACA;UACAH;YACA;YAEAI,yDACAhD;YAEA,yDACA9B;YACA;YACA;cAAA;cACA7B;cACA;cACA;cACA;YACA;YACA;cACAA;cACA;cACA;YACA;YACAwG;UACA;QAEA;MAEA;IAEA;IAEA;AACA;AACA;IACAM;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;QAAA;QACAhD;;QAEA;QACA;UACAA;QACA;QACA;UACAA;QACA;QAEA;QACA;MACA;QAAA;QACAA;;QAEA;QACA;UACAA;QACA;QACA;UACAA;QACA;QAEA;QACA;MACA;MAEA;QAAA;;QAEA;QACA;UACAA;QACA;QAEA,uCACAA,4BACAA,8BACAA,cACA;QACA,kDAEA,iDACA,kCACA;MACA;MACA;QAAA;QACA;QACA,uCACAA,4BACAA,8BACAA,cACA;QACA,kDAEA,iDACA,mCACA;MACA;MACA;QAAA;QACA;MACA;MACA;QAAA;QACA;QACA/D;UACAiB;UACAC;QACA;MACA;IACA;IAEA;AACA;AACA;IACA8F;MACA;MACA;MACA;MACA;QAAA;QACAjD;MACA;QAAA;QACAA;MACA;MACA;QACA;UAAA;UACA/D;YACAiB;YACAC;UACA;QACA;UAAA;UACA,uCACA,wCACA,0CACA,2BACA;UACA,wDAIA;QACA,0FACA+F,WACA;UAAA;UACA;QACA;MACA;QACA;UAAA;UACA,uCACA,wCACA,0CACA,2BACA;UACA,wDAIA;QACA;UAAA;UACA,sDAIA;UACA,kDAEA,yCACA,0BACA;QACA;MACA;MACA;MACA;IAEA;IAEA;AACA;AACA;IACAC;MAEA;MACA;MACA;MACA,sDAIA;MACA,kDAEA,yCACA,0BACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;MACA;MACA;QAAA;QACArD;;QAEA;QACA;UACAA;QACA;QACA;UACAA;QACA;QAEA;QACA;MACA;QAAA;QACAA;;QAEA;QACA;UACAA;QACA;QACA;UACAA;QACA;QAEA;QACA;MACA;MAEA;QAAA;QACA;UACA;QACA;;QAEA;QACA;UACAA;QACA;QAEA,yCACA,wCACA,kDACA,mCACA;QACA,yCACAA,4BACAA,8BACAA,cACA;QACA,mDAEA,iDACA,kCACA;MACA;MACA;QAAA;QACA;QACA;UAAA;UACA;;YAGA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UAAA,CAGA;YACA,yCACA,wCACA,kDACA,mCACA;YACA,yCACAA,4BACAA,8BACAA,cACA;YACA,mDAEA,iDACA,kCACA;UACA;QACA;UAAA;UACA;YACAhC;YACAC;YACA1C;YACAmD;YACAR;YACAM,oCAEA,yCACA,0BACA;YACAL;UACA;UACA,yCACA,wCACA,kDACA,mCACA;UACA,yCACA6B,4BACAA,8BACAA,cACA;UACA,mDAEA,iDACA,kCACA;QACA;MACA;MACA;QAAA;;QAEA;QACA;UACAA;QACA;QAEA;UAAA;;UAEA,uCACA,gDACA,kDACA,mCACA;UACA,kDAEAA,8BACAA,cACA;QACA;UACA,yCACA,gDACA,kDACA,mCACA;UACA,kDAEAA,8BACAA,cACA;UACA,mDAEA,iDACA,kCACA;QACA;MACA;MACA;QAAA;;QAEA;QACA;UAAA;UACA;YAAA;;YAEA,uCACA,gDACA,kDACA,mCACA;YACA,kDAEAA,8BACAA,cACA;UACA;YACA,yCACA,gDACA,kDACA,mCACA;YACA,kDAEAA,8BACAA,cACA;YACA,mDAEA,iDACA,kCACA;UACA;QACA;UAAA;UACA;YACAhC;YACAC;YACA1C;YACAmD;YACAR;YACAM,2BACA,wCACA,0CACA,2BACA;YACAL;UACA;UACA,yCACA,gDACA,kDACA,mCACA;UACA,kDAEA6B,8BACAA,cACA;UACA,mDAEA,iDACA,kCACA;QACA;MACA;IAEA;IAEA;AACA;AACA;IACAsD;MACA;MACA;MACA;MACA;MACA;QACAtD;MACA;QACAA;MACA;MACA;QAAA;QACA;UAAA;UACA;QACA;UAAA;UACA;QACA,0FACAkD,WACA;UAAA;UACA;QACA;MACA;QACA;UAAA;UACA;QACA;UAAA;UACA,yCACA,wCACA,0CACA,2BACA;UACA,wDAIA;UACA,mDAEA,yCACA,0BACA;QACA;UAAA;UACA;QACA;UAAA;UACA,yCACA,wCACA,0CACA,2BACA;UACA,wDAIA;UACA,mDAEA,yCACA,0BACA;UACA,uCACA,wCACA,0CACA,2BACA;QACA;MACA;MACA;MACA;IAEA;IAEA;AACA;AACA;IACAK;MAEA;MACA;MACA;MACA,yCACA,wCACA,0CACA,2BACA;MACA,wDAIA;MACA,mDAEA,yCACA,0BACA;MACA,uCACA,wCACA,0CACA,2BACA;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MAIA;MACAb;QACA;MACA;IACA;IAEA;AACA;AACA;IACAc;MAAA;MAIA;MACA;MACA;MACAd;QACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAe;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACAzH;kBACAiB;kBACAmF;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;AACA;AACA;IACAsB;MAAA;MAEA;MACAhB;QACA;MACA;IACA;IAEA;AACA;AACA;IACAiB;MAAA;MAIA;MACA;MACAjB;QACA;MACA;IACA;IAEA;AACA;AACA;IACAkB;MACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAEA;gBACA7H;kBACAiB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACA;gBACAjB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;AACA;AACA;IACA8H;MAAA;MAEA;QAAA;QACA,sDAIA;QACA,kDAEA,yCACA,0BACA;QACA;MACA;MACA;QACA;QACA9H;UACAiB;UACAmF;QACA;QACA;MACA;MACA;MACA;MACA;QAAA;QACA2B;QACA;QACA;MACA;MAEA;MACA;MACA;MACA,yCACA,wCACA,0CACA,2BACA;MACA;MACA;MACArB;QACA;UACA;UACA;UACA;UACA;UACA;QAAA;QAEA;QACA,4CACA,2CACA,6CACA,8BACA;QACA,2DAIA;QACA,sDAEA,4CACA,6BACA;MACA;IACA;IAGA;AACA;AACA;IACAsB;MAAA;MACA;QAAA;;QAEA;QACA;QACA;QACAhI;UACAiB;UACAC;QACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA;QACAlB;UACAiB;UACAmF;QACA;QACA;MACA;MACA;MACA;MACA;QAAA;QACA2B;QACA;QACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA,mDAEA,yCACA,0BACA;MACArB;QACA;UACA;UACA;UACA;UACA;QAAA;QAEA;QACA,4CACA,2CACA,6CACA,8BACA;QACA,2DAIA;QACA,sDAEA,4CACA,6BACA;MACA;IACA;IAEA;AACA;AACA;IACAuB;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACAxI;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBACA;kBACAsC;kBACAP;kBACAQ;gBACA;gBAAA;gBAAA,OACA,iFACAkG;cAAA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;kBACAnG;kBACAoG;gBACA;cAAA;gBAAA,MAGA1I;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;kBACAsC;kBACAP;kBACAQ;gBACA;gBAAA;gBAAA,OACA,iFACAkG;cAAA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;kBACAnG;kBACAqG;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAGA;AACA;AACA;IACAC;MACA;QACArI;UACAiB;UACAC;QACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACAlB;UACAiB;QACA;QACA;MACA;IAEA;IAEA;AACA;AACA;IACAqH;MACA;QACAtI;UACAiB;UACAC;QACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACAlB;UACAiB;QACA;QACA;MACA;IACA;IAGA;AACA;AACA;IACAsH;MAEA;MACA;MACA;QACAxG;QACAC;QACA1C;QACAmD;QACAR;QACAM,0CAIA;QACAL;MACA;MACA;QACA;UAAA;UACA;YACAH;YACAqG;YACA7F,2BACA,wCACA,0CACA;UAEA;QACA;UACA;YACAR;YACAC;YACA1C;YACAmD;YACAR;YACAM,2BACA,wCACA,0CACA,2BACA;YACAL;UACA;QACA;MACA;QACA;UACAH;UACAC;UACA1C;UACAmD;UACAR;UACAM,2BACA,wCACA,0CACA,2BACA;UACAL;QACA;MACA;MACA;QACA;UAAA;UACA;YACAH;YACAoG;YACA5F,oCAEA,yCACA;UAEA;QACA;UACA;YACAR;YACAC;YACA1C;YACAmD;YACAR;YACAM,oCAEA,yCACA,0BACA;YACAL;UACA;QACA;MACA;QACA;UACAH;UACAC;UACA1C;UACAmD;UACAR;UACAM,oCAEA,yCACA,0BACA;UACAL;QACA;MACA;IACA;IAEA;AACA;AACA;IACAsG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACAxI;kBACAiB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACA;gBACAjB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;AACA;AACA;IACAyI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAhH;gBACA;gBACAzB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACAqG;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEA;AACA;AACA;IACAqC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAjH;gBACA;gBACAzB;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACAqG;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEA;AACA;AACA;IACAsC;MACA;QAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA3I;MACA;QAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAA;MACA;IACA;IAEA;AACA;AACA;IACA4I;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAnH;gBAAA,MACAoD;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAGA;gBACA7E;gBACA;gBAAA;gBAAA,OACA;cAAA;gBACAqG;gBACA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIA;IAGA;AACA;AACA;IACAwC;MACA;QACA;MACA;QACA;QACA;QACA7I;MACA;IACA;IAEA;AACA;AACA;IACA8I;MACA;MACA;QACA;MACA;QACA;QACA9I;MACA;IACA;IAEA;AACA;AACA;IACA+I;MAEA;MACA;MACA;MACA;QACA/I;UACAiB;UACAmF;QACA;MACA;;MAGA;MACA;MAEA;QACA;UACA4C;UACAd;UAAA;UACA9I;QACA;MACA;MAEA;QACA;QACAY;MACA;;MAEA;MACA;MACA;IACA;IAGA;AACA;AACA;IACAiJ;MACA;MACA;MACA;MACA;MACA;IAAA,CACA;IAGA;AACA;AACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEA;gBACA;gBACA;gBAEA;gBACAC;gBAEAC;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBACAD;gBAAA;cAAA;gBAFAC;gBAAA;gBAAA;cAAA;gBAAA,MAYA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAGA;gBACA;kBACApJ;oBACAiB;oBACAmF;kBACA;gBACA;gBACAiD;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;kBACA1I;kBACA;kBACAZ;kBACAA;oBACAiB;oBACAC;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBAEA;oBAAA;oBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAWA;IAGA;AACA;AACA;IACAqI;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBACA;kBACA/H;kBACAQ;kBACA1C;kBACA4C;gBACA;;gBAEA;gBAAA,MACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;kBACAV;kBACAQ;kBACA1C;kBACA4C;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;kBACAH;kBACAqG;gBACA;cAAA;gBAAA,MAIA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBACA;kBACA5G;kBACAQ;kBACA1C;kBACA4C;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;kBACAH;kBACAoG;gBACA;cAAA;gBAAA;gBAAA,OAIA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAEA;gBACA;gBACA;gBACAnI;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EAEA;AAGA;AAAA,2B;;;;;;;;;;;;;ACjwEA;AAAA;AAAA;AAAA;AAAwqC,CAAgB,ynCAAG,EAAC,C;;;;;;;;;;;ACA5rC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA4qC,CAAgB,6nCAAG,EAAC,C;;;;;;;;;;;ACAhsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/bookHomepage/bookHomepage.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/bookHomepage/bookHomepage.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./bookHomepage.vue?vue&type=template&id=85769d34&scoped=true&\"\nvar renderjs\nimport script from \"./bookHomepage.vue?vue&type=script&lang=js&\"\nexport * from \"./bookHomepage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bookHomepage.vue?vue&type=style&index=0&id=85769d34&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"85769d34\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/bookHomepage/bookHomepage.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookHomepage.vue?vue&type=template&id=85769d34&scoped=true&\"","var components\ntry {\n  components = {\n    uLoadingPage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-page/u-loading-page\" */ \"@/uni_modules/uview-ui/components/u-loading-page/u-loading-page.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    BookList: function () {\n      return import(\n        /* webpackChunkName: \"components/BookList/BookList\" */ \"@/components/BookList/BookList.vue\"\n      )\n    },\n    uTabs: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-tabs/u-tabs\" */ \"@/uni_modules/uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.loading ? _vm.book.chapters.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookHomepage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookHomepage.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<!-- 页加载 -->\r\n\t\t<u-loading-page :loading=\"loading\"></u-loading-page>\r\n\t\t<!-- 消息提醒 -->\r\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\r\n\t\t<!-- 加载后显示书籍主页 -->\r\n\t\t<view class=\"bookHome\" v-if=\"!loading\">\r\n\t\t\t<!-- 头部 -->\r\n\t\t\t<view class=\"head\">\r\n\t\t\t\t<BookList :imgurl=\"book.imgurl\" :title=\"book.bookname\" :isClick=\"true\" :info=\"'作者: ' + book.author\"\r\n\t\t\t\t\t:info1=\"'共 '+book.chapters.length+' 章'\" :bookSourceName=\"book.bookSourceName\" :tags=\"book.tags\">\r\n\t\t\t\t</BookList>\r\n\t\t\t</view>\r\n\t\t\t<!-- 中间 包含简介和章节 -->\r\n\t\t\t<view class=\"bom\">\r\n\t\t\t\t<view class=\"tab\">\r\n\t\t\t\t\t<u-tabs :list=\"list4\" lineWidth=\"30\" lineColor=\"#f56c6c\" :activeStyle=\"{\r\n\t\t\t\t\t            color: '#303133',\r\n\t\t\t\t\t            fontWeight: 'bold',\r\n\t\t\t\t\t            transform: 'scale(1.05)'\r\n\t\t\t\t\t        }\" :inactiveStyle=\"{\r\n\t\t\t\t\t            color: '#606266',\r\n\t\t\t\t\t            transform: 'scale(1)'\r\n\t\t\t\t\t        }\" itemStyle=\"padding: 20rpx; height: 100rpx;width: 50%; \" @click=\"goclick\">\r\n\t\t\t\t\t</u-tabs>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"intro\">\r\n\r\n\t\t\t\t\t<template v-if=\"vis\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<!-- decode简介解码 -->\r\n\t\t\t\t\t\t\t<text decode>\r\n\t\t\t\t\t\t\t\t{{book.intro}}\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else> \r\n\r\n\t\t\t\t\t\t<virtual-list :items=\"book.chapters\" :size=\"40\" :remain=\"16\" :active=\"book.readIndex\"\r\n\t\t\t\t\t\t\t:scrollHeight=\"scrollHeight\">\r\n\t\t\t\t\t\t\t<template v-slot=\"{item}\">\r\n\t\t\t\t\t\t\t\t<view class=\"directory-listItem\" @click=\"gochapter(item.chapterurl)\">\r\n\t\t\t\t\t\t\t\t\t{{item.chaptername}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</virtual-list>\r\n\r\n\t\t\t\t\t\t<!-- 章节列表 -->\r\n\t\t\t\t\t\t<!-- <view v-for=\"(chapter, index) in chapters\" :key=\"index\" @click=\"gochapter(index)\">\r\n\t\t\t\t\t\t\t<Chapter :book=\"book\" :chapter=\"chapter\"></Chapter>\r\n\t\t\t\t\t\t</view> -->\r\n\r\n\t\t\t\t\t</template>\r\n\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<!-- 固定在最底部 -->\r\n\t\t\t<view class=\"footer\">\r\n\r\n\t\t\t\t<!-- 添加到书架 -->\r\n\t\t\t\t<view class=\"bookadd\">\r\n\t\t\t\t\t<view class=\"add\" @click=\"addclick()\">\r\n\t\t\t\t\t\t<u-icon :name=\"addList[addid].name\" size=\"26\">\r\n\t\t\t\t\t\t</u-icon>\r\n\t\t\t\t\t\t<view class=\"addtext\">\r\n\t\t\t\t\t\t\t{{addList[addid].text}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 开始阅读 -->\r\n\t\t\t\t<button type=\"default\" size=\"default\" @click=\"goread\">开始阅读</button>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t//引入HTML 文本解析器\r\n\timport HTMLParser from \"@/uni_modules/html-parser/js_sdk/index.js\"\r\n\timport bookReadVue from \"../bookRead/bookRead.vue\"\r\n\timport store from \"@/store/index.js\"\r\n\timport virtualList from '@/components/virtualList.vue';\r\n\timport origins from '@/getNetwork/origins.json'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tvirtualList\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 书籍对象，imgurl，bookurl，bookname，author，origin\r\n\t\t\t\tbook: {},\r\n\t\t\t\t// //简介\r\n\t\t\t\t// intro: \"简介：无\",\r\n\t\t\t\t// // 章节列表\r\n\t\t\t\t// chapters: [],\r\n\t\t\t\t// //读到第几章\r\n\t\t\t\t// readIndex: 0,\r\n\t\t\t\t//是否显示简介\r\n\t\t\t\tvis: true,\r\n\t\t\t\t//页面加载等待，一进入页面就进行加载\r\n\t\t\t\tloading: true,\r\n\t\t\t\t//u-tabs导航栏内容\r\n\t\t\t\tlist4: [{\r\n\t\t\t\t\tname: '简介'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '目录'\r\n\t\t\t\t}],\r\n\r\n\t\t\t\t// 加入书架列表\r\n\t\t\t\taddList: [{\r\n\t\t\t\t\t\tname: 'plus-circle-fill',\r\n\t\t\t\t\t\ttext: \"加入书架\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'checkmark-circle',\r\n\t\t\t\t\t\ttext: \"已在书架\",\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t// 加入书架列表索引\r\n\t\t\t\taddid: 0,\r\n\t\t\t\t// 消息提示列表\r\n\t\t\t\tuToastList: [{\r\n\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t\tmessage: \"已从书架中移除\",\r\n\t\t\t\t\t// iconUrl: 'https://cdn.uviewui.com/uview/demo/toast/error.png',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\tposition: 'bottom',\r\n\t\t\t\t\tmessage: \"已加入书架\",\r\n\t\t\t\t\t// iconUrl: 'https://cdn.uviewui.com/uview/demo/toast/success.png',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t}],\r\n\t\t\t\t// 这本书在书架中的索引,-1为没有\r\n\t\t\t\tbookShelfIndex: -1,\r\n\t\t\t\tscrollHeight: 0,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t//书籍对象由路由中传递的元素获取\r\n\t\tonLoad(e) {\r\n\t\t\t// this.book = e;\r\n\t\t\tthis.book = JSON.parse(e.book)\r\n\t\t\t\r\n\t\t\t// 添加书源属性\r\n\t\t\tthis.getSourceName();\r\n\t\t\t// 添加进历史记录\r\n\t\t\tthis.$store.commit(\"addBookHistoryList\", this.book)\r\n\r\n\t\t\tconst {\r\n\t\t\t\twindowHeight,\r\n\t\t\t\twindowWidth,\r\n\t\t\t} = uni.getSystemInfoSync()\r\n\t\t\t//获取一些必要的设备参数\r\n\t\t\t// 将rpx转成px\r\n\t\t\tlet height = (windowWidth / 750) * Number(580)\r\n\t\t\t// 获取章节可视化区域高度\r\n\t\t\tthis.scrollHeight = windowHeight - height\r\n\t\t},\r\n\t\t//每次展示就刷新\r\n\t\tonShow() {\r\n\r\n\t\t\t//得到在书架中的索引，需要传入bookurl（唯一标识）\r\n\t\t\tthis.$store.dispatch('findBookFromShelf', this.book.bookurl).then(index => {\r\n\r\n\t\t\t\t\tthis.bookShelfIndex = index;\r\n\t\t\t\t\t//如果在书架中，则应该显示已在书架\r\n\t\t\t\t\tif (this.bookShelfIndex != -1) {\r\n\t\t\t\t\t\tthis.addid = 1;\r\n\t\t\t\t\t\t// 并将该书对象赋值给页面元素，优化，如果有该信息就不用再请求了\r\n\t\t\t\t\t\t// const book = this.$store.state.bookShelf[index]\r\n\t\t\t\t\t\t// this.intro = book.intro\r\n\t\t\t\t\t\t// this.chapters = book.chapters\r\n\t\t\t\t\t\t// this.readIndex = book.readIndex\r\n\t\t\t\t\t\t// 取消页面加载\r\n\t\t\t\t\t\tthis.loading = false;\r\n\r\n\t\t\t\t\t\t// 添加进历史记录\r\n\t\t\t\t\t\tthis.$store.commit(\"addBookHistoryList\", this.book)\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.addid = 0;\r\n\t\t\t\t\t\t//如果不在书架，需要获取该书信息\r\n\t\t\t\t\t\t//获取简介章节数据\r\n\t\t\t\t\t\tthis.fetchData();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\t// 异常情况的处理\r\n\t\t\t\t});;\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\t// 获取书源\r\n\t\t\tgetSourceName() {\r\n\t\t\t\tconst index = origins.findIndex(item => item.bookSourceUrl === this.book.origin.trim());\r\n\t\t\t\tthis.book.bookSourceName = origins[index].bookSourceName;\r\n\t\t\t},\r\n\r\n\t\t\t//点击切换目录和简介\r\n\t\t\tgoclick(e) {\r\n\t\t\t\t// 如果点击的是目录，显示目录，否则显示简介\r\n\t\t\t\tif (e.index === 1) {\r\n\t\t\t\t\tthis.vis = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.vis = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//加入书架和移除操作\r\n\t\t\taddclick() {\r\n\t\t\t\t// 如果索引小于1，则变成1，否则等于0\r\n\t\t\t\tif (this.addid < 1) {\r\n\t\t\t\t\tthis.addid++;\r\n\r\n\t\t\t\t\t// //创建这本书的对象，并加入到书架里面\r\n\t\t\t\t\t// let addbook = {\r\n\t\t\t\t\t// \timgurl: this.book.imgurl,\r\n\t\t\t\t\t// \tbookurl: this.book.bookurl,\r\n\t\t\t\t\t// \tbookname: this.book.bookname,\r\n\t\t\t\t\t// \tauthor: this.book.author,\r\n\t\t\t\t\t// \tintro: this.intro,\r\n\t\t\t\t\t// \torigin: this.book.origin,\r\n\t\t\t\t\t// \tbookSourceName: this.book.bookSourceName,\r\n\t\t\t\t\t// \treadIndex: 0,\r\n\t\t\t\t\t// \treadAll: this.chapters.length,\r\n\t\t\t\t\t// \tchapters: this.chapters\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tthis.book.readIndex = 0;\r\n\t\t\t\t\tthis.book.readAll = this.book.chapters.length\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$store.commit('addBookShelf', this.book);\r\n\r\n\t\t\t\t\t//得到在书架中的索引，需要传入bookurl（唯一标识）\r\n\t\t\t\t\tthis.$store.dispatch('findBookFromShelf', this.book.bookurl).then(index => {\r\n\r\n\t\t\t\t\t\t\tthis.bookShelfIndex = index;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\t// 异常情况的处理\r\n\t\t\t\t\t\t});;\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//如果是移除书架\r\n\t\t\t\t\tthis.addid = 0;\r\n\t\t\t\t\t//调用同步方法删除，需要传入bookurl\r\n\t\t\t\t\tthis.$store.commit('deleteBook', this.book.bookurl);\r\n\t\t\t\t\t//已经删除了 书架中没有 标识为-1\r\n\t\t\t\t\tthis.bookShelfIndex = -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//消息提示，根据索引值提示不同消息（加入书架或移除）\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t...this.uToastList[this.addid],\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//点击开始阅读\r\n\t\t\tgoread() {\r\n\r\n\t\t\t\tif (this.bookShelfIndex != -1) {\r\n\t\t\t\t\t// 如果在书架，则不用获取索引（索引已在页面加载时获取到了）\r\n\t\t\t\t\t// 阅读页面需要两个值，在书架中的索引以及读到第几章的索引\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/pages/bookRead/bookRead?bookShelfIndex=${this.bookShelfIndex}&readIndex=${this.book.readIndex}`\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//如果不在书架中\r\n\t\t\t\t\t// //创建这本书的对象，并加入到书架里面\r\n\t\t\t\t\t// let addbook = {\r\n\t\t\t\t\t// \timgurl: this.book.imgurl,\r\n\t\t\t\t\t// \tbookurl: this.book.bookurl,\r\n\t\t\t\t\t// \tbookname: this.book.bookname,\r\n\t\t\t\t\t// \tauthor: this.book.author,\r\n\t\t\t\t\t// \tintro: this.intro,\r\n\t\t\t\t\t// \torigin: this.book.origin,\r\n\t\t\t\t\t// \tbookSourceName: this.book.bookSourceName,\r\n\t\t\t\t\t// \treadIndex: 0,\r\n\t\t\t\t\t// \treadAll: this.chapters.length,\r\n\t\t\t\t\t// \tchapters: this.chapters\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tthis.book.readIndex = 0;\r\n\t\t\t\t\tthis.book.readAll = this.book.chapters.length\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.$store.commit('addBookShelf', this.book);\r\n\r\n\t\t\t\t\t// 然后得到在书架中的索引，需要传入bookurl（唯一标识）\r\n\t\t\t\t\tthis.$store.dispatch('findBookFromShelf', this.book.bookurl).then(index => {\r\n\r\n\t\t\t\t\t\t\tthis.bookShelfIndex = index;\r\n\t\t\t\t\t\t\t// 新加入的书架，阅读章节为0\r\n\t\t\t\t\t\t\tthis.readIndex = 0;\r\n\r\n\t\t\t\t\t\t\t// 阅读页面需要两个值，在书架中的索引以及读到第几章的索引\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: `/pages/bookRead/bookRead?bookShelfIndex=${this.bookShelfIndex}&readIndex=${this.book.readIndex}`\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\t// 异常情况的处理\r\n\t\t\t\t\t\t});;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//点击章节\r\n\t\t\tgochapter(rIndex) {\r\n\t\t\t\tconsole.log(\"点击了\" + rIndex);\r\n\r\n\t\t\t\trIndex = this.book.chapters.findIndex(item => item.chapterurl === rIndex);\r\n\r\n\t\t\t\t// 点击的第几章\r\n\t\t\t\t// this.readIndex = rIndex;\r\n\t\t\t\t// //创建这本书的对象，并加入到书架里面\r\n\t\t\t\t// let addbook = {\r\n\t\t\t\t// \timgurl: this.book.imgurl,\r\n\t\t\t\t// \tbookurl: this.book.bookurl,\r\n\t\t\t\t// \tbookname: this.book.bookname,\r\n\t\t\t\t// \tauthor: this.book.author,\r\n\t\t\t\t// \tintro: this.intro,\r\n\t\t\t\t// \torigin: this.book.origin,\r\n\t\t\t\t// \tbookSourceName: this.book.bookSourceName,\r\n\t\t\t\t// \treadIndex: rIndex,\r\n\t\t\t\t// \treadAll: this.chapters.length,\r\n\t\t\t\t// \tchapters: this.chapters\r\n\t\t\t\t// }\r\n\t\t\t\tthis.book.readIndex = rIndex;\r\n\t\t\t\tthis.book.readAll = this.book.chapters.length\r\n\r\n\t\t\t\tif (this.bookShelfIndex !== -1) {\r\n\r\n\t\t\t\t\t// 如果在书架，更新章节\r\n\t\t\t\t\t// 阅读页面需要两个值，在书架中的索引以及点的是第几章的索引\r\n\t\t\t\t\tthis.$store.commit('modifyBook', this.book);\r\n\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `/pages/bookRead/bookRead?bookShelfIndex=${this.bookShelfIndex}&readIndex=${this.book.readIndex}`\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//如果不在书架中\r\n\t\t\t\t\tthis.$store.commit('addBookShelf', this.book);\r\n\t\t\t\t\t// 然后得到在书架中的索引，需要传入bookurl（唯一标识）\r\n\t\t\t\t\tthis.$store.dispatch('findBookFromShelf', this.book.bookurl).then(index => {\r\n\r\n\t\t\t\t\t\tthis.bookShelfIndex = index;\r\n\r\n\t\t\t\t\t\t// 阅读页面需要两个值，在书架中的索引以及点击的第几章的索引\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/pages/bookRead/bookRead?bookShelfIndex=${this.bookShelfIndex}&readIndex=${this.readIndex}`\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\t// 异常情况的处理\r\n\t\t\t\t\t});;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 发送网络请求，获取页面内容\r\n\t\t\tasync fetchData() {\r\n\r\n\t\t\t\tconst newbook = await this.$getNetwork.homePage(this.book);\r\n\t\t\t\t// console.log(newbook);\r\n\t\t\t\tif (newbook != -1) {\r\n\t\t\t\t\t// 复制对象 同属性会被覆盖 所以传入homePage的是this.book\r\n\t\t\t\t\tObject.assign(this.book, newbook);\r\n\t\t\t\t\t// this.book.intro = newbook.intro\r\n\t\t\t\t\t// if (newbook.chapters.length > 0) {\r\n\t\t\t\t\t// \tthis.book.chapters = newbook.chapters\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"加载出错\",\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 取消加载\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.bookHome {\r\n\t\t.head {\r\n\t\t\theight: 350rpx;\r\n\t\t\tbackground: linear-gradient(to bottom, #FFC0CB 20%, #fff 100%);\r\n\t\t\t// background: linear-gradient(to top, #362998 0%, #f5f5f5 100%);\r\n\t\t\t/*渐变方向to bottom表示从上到下*/\r\n\r\n\t\t\tdisplay: flex;\r\n\t\t\t/* 使用Flexbox布局 */\r\n\t\t\tflex-direction: column;\r\n\t\t\t/* 将子元素以垂直方向排列 */\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\t/* 将子元素在交叉轴方向上靠近底部 */\r\n\r\n\t\t}\r\n\r\n\t\t.bom {\r\n\t\t\t.tab {}\r\n\r\n\t\t\t.intro {\r\n\t\t\t\tpadding: 0 30rpx;\r\n\r\n\t\t\t\t// 目录样式\r\n\t\t\t\t.directory-listItem {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tpadding-left: 20px;\r\n\t\t\t\t\tpadding-right: 20px;\r\n\t\t\t\t\theight: 50px;\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t// border-bottom: #eee solid 1px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpadding-bottom: 130rpx;\r\n\t\t\t/* 与.footer元素的高度一致 避免被底部遮挡*/\r\n\t\t}\r\n\r\n\t\t// 底部固定元素\r\n\t\t.footer {\r\n\t\t\tposition: fixed;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tdisplay: flex;\r\n\t\t\t/* 使用flex布局 */\r\n\t\t\talign-items: center;\r\n\t\t\t/* 垂直居中 */\r\n\t\t\tbottom: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 130rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-top: 1px solid #efefef;\r\n\r\n\t\t\t.bookadd {\r\n\r\n\t\t\t\t//加入书架距离左侧距离\r\n\t\t\t\tpadding-left: 100rpx;\r\n\r\n\t\t\t\t.add {\r\n\t\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t\t.addtext {\r\n\t\t\t\t\t\tpadding-left: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbutton {\r\n\t\t\t\twidth: 100px;\r\n\t\t\t\theight: 40px;\r\n\t\t\t\tmargin-right: 80rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfloat: right;\r\n\t\t\t\tbackground-color: #E5363D;\r\n\t\t\t\tbox-shadow: 0 0 2px #dd0000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n</style>","import { render, staticRenderFns, recyclableRender, components } from \"./bookRead.vue?vue&type=template&id=31379966&scoped=true&\"\nvar renderjs\nimport script from \"./bookRead.vue?vue&type=script&lang=js&\"\nexport * from \"./bookRead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bookRead.vue?vue&type=style&index=0&id=31379966&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31379966\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/bookRead/bookRead.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookRead.vue?vue&type=template&id=31379966&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.menuShow ? _vm.directoryList.length : null\n  var m0 = _vm.$hasSSP(\"1487d740-10\")\n  var m1 = m0 ? _vm.$getSSP(\"1487d740-10\", \"default\") : null\n  var m2 = m0 ? _vm.$getSSP(\"1487d740-10\", \"default\") : null\n  var m3 = m0\n    ? _vm.directoryListItemColor(\n        _vm.$getSSP(\"1487d740-10\", \"default\")[\"item\"].index\n      )\n    : null\n  var m4 = m0 ? _vm.$getSSP(\"1487d740-10\", \"default\") : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookRead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookRead.vue?vue&type=script&lang=js&\"","<!-- 搜‘根据需要更改’，需要根据实际项目更改的已经列出来了 -->\r\n<!-- 重要事项：\r\n\t1.由于阅读页截取整行的需要，请确保文本格式和本插件中的text变量所示一致，即：！！！每一行的高度要一致！！！\r\n\t  如果要加内容，例如每一章开头加上章节名:'<h1>章节名</h1>',请确保所加的内容是单行高度的整数倍！！\r\n\t2.‘仅用于计算’的样式必须和阅读页样式一致，不然显示会有问题,\r\n\t3.字体必须是偶数，否则1.5倍行距的时候会无法截取到整行\r\n -->\r\n\r\n<template>\r\n\t<view style=\"height: 100vh;\">\r\n\r\n\t\t<!-- 仅用于计算（结构和样式请和阅读页一致） -->\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t章节名\r\n\t\t\t</view>\r\n\t\t\t<view id=\"content\" class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"preChapter\" v-html=\"preChapter.text\"\r\n\t\t\t\t\t\t:style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t显示电量、页码\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t章节名\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"curChapter\" v-html=\"curChapter.text\"\r\n\t\t\t\t\t\t:style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t显示电量、页码\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"container hidden\">\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t章节名\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\">\r\n\t\t\t\t\t<view class=\"book-inner\" id=\"nextChapter\" v-html=\"nextChapter.text\"\r\n\t\t\t\t\t\t:style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t显示电量、页码\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- ************************** -->\r\n\t\t<!--     根据需要更改（封面）     -->\r\n\t\t<!-- ************************** -->\r\n\t\t<!-- 封面 -->\r\n\t\t<view class=\"cover container\"\r\n\t\t\t:class=\"{container0: background === 1, container1: background === 2,container2: background === 3}\" :style=\"{zIndex: 201, transform: `translate${cover.pageTranslate[turnType]}`, transition: `transform ${showAnimation?turnPageTime:0}s`,\r\n\t\t\tboxShadow:showShadow&&turnType===0?'0 0 10px 0 rgba(0,0,0,.4)':''}\" @touchstart=\"coverTouchStart\"\r\n\t\t\t@touchend=\"coverTouchEnd\" @touchmove=\"coverTouchMove\" @touchcancel=\"coverTouchcancel\">\r\n\t\t\t<image :src=\"book.imgurl\" style=\"border-radius: 10px; box-shadow: -2px 2px 4px rgba(0, 0, 0, 0.5);\"></image>\r\n\t\t\t<view style=\"padding: 50rpx;font-size: 24px;\">\r\n\t\t\t\t{{book.bookname}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- ************************** -->\r\n\t\t<!--****************************-->\r\n\t\t<!-- ************************** -->\r\n\r\n\r\n\t\t<!-- 阅读页（结构和样式请和仅用于计算元素一致） -->\r\n\t\t<!-- 上一页 -->\r\n\t\t<view class=\"container\"\r\n\t\t\t:class=\"{container0: background === 1, container1: background === 2,container2: background === 3}\" :style=\"{zIndex: 102, transform: `translate${prePage.pageTranslate[turnType]}`, transition: `transform ${showAnimation?turnPageTime:0}s`,\r\n\t\t\tboxShadow:showShadow&&turnType===0?'0 0 10px 0 rgba(0,0,0,.4)':''}\">\r\n\t\t\t<!-- 章节名 -->\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t{{prePage.chapterName}}\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 外层class=\"content\"用于计算阅读部分的高度 -->\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<!-- 内层class=\"inner-box\"利用innerHeight将内容截取至整行，防止文字不完整的情况出现 -->\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\" v-if=\"prePage.canRead\">\r\n\t\t\t\t\t<!-- 最里层class=\"book-inner\"的用于获取文本总高度，计算总页数，注意不可以overflow:hidden -->\r\n\t\t\t\t\t<view class=\"book-inner\" v-html=\"prePage.text\" :style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`,color: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\ttransform: `translateY(-${prePage.pageNum*innerHeight}px)`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\"\r\n\t\t\t\t\tv-else>\r\n\t\t\t\t\t付费章节\r\n\t\t\t\t\t<view style=\"padding: 5px 15px;background-color: #eee;\">去购买</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{systemTimeStr}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 页码 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{prePage.pageNum + 1}}/{{prePage.totalPage}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 电量 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 本页 -->\r\n\t\t<view class=\"container\"\r\n\t\t\t:class=\"{container0: background === 1, container1: background === 2,container2: background === 3}\" :style=\"{zIndex: 101, transform: `translate${curPage.pageTranslate[turnType]}`, transition: `transform ${showAnimation?turnPageTime:0}s`,\r\n\t\t\tboxShadow:showShadow&&turnType===0?'0 0 10px 0 rgba(0,0,0,.4)':''}\" @touchstart=\"touchStart\" @touchend=\"touchEnd\"\r\n\t\t\t@touchmove=\"touchMove\" @touchcancel=\"touchcancel\">\r\n\t\t\t<!-- 章节名 -->\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t{{curPage.chapterName}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\" v-if=\"curPage.canRead\">\r\n\t\t\t\t\t<view class=\"book-inner\" v-html=\"curPage.text\" :style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`,color: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\ttransform: `translateY(-${curPage.pageNum*innerHeight}px)`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\"\r\n\t\t\t\t\tv-else>\r\n\t\t\t\t\t付费章节\r\n\t\t\t\t\t<view style=\"padding: 5px 15px;background-color: #eee;\" @touchstart.stop @touchmove.stop\r\n\t\t\t\t\t\t@touchend.stop=\"buyBook\">去购买</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{systemTimeStr}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 页码 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{curPage.pageNum + 1}}/{{curPage.totalPage}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 电量 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 下一页 -->\r\n\t\t<view class=\"container\"\r\n\t\t\t:class=\"{container0: background === 1, container1: background === 2,container2: background === 3}\" :style=\"{zIndex: 100, transform: `translate${nextPage.pageTranslate[turnType]}`,transition: `transform ${showAnimation?turnPageTime:0}s`,\r\n\t\t\tboxShadow:showShadow&&turnType===0?'0 0 10px 0 rgba(0,0,0,.4)':''}\">\r\n\t\t\t<!-- 章节名 -->\r\n\t\t\t<view class=\"chapter\">\r\n\t\t\t\t{{nextPage.chapterName}}\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view class=\"inner-box\" :style=\"{height: `${innerHeight}px`}\" v-if=\"nextPage.canRead\">\r\n\t\t\t\t\t<view class=\"book-inner\" v-html=\"nextPage.text\" :style=\"{fontSize: `${fontSize}px`, lineHeight: `${lineHeight*fontSize}px`,color: `${colorList[background - 1]}`,\r\n\t\t\t\t\t\ttransform: `translateY(-${nextPage.pageNum*innerHeight}px)`}\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"display:flex;flex-flow: column;justify-content: center;align-items: center;height: 100%;\"\r\n\t\t\t\t\tv-else>\r\n\t\t\t\t\t付费章节\r\n\t\t\t\t\t<view style=\"padding: 5px 15px;background-color: #eee;\">去购买</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom-bar\">\r\n\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{systemTimeStr}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 页码 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t{{nextPage.pageNum + 1}}/{{nextPage.totalPage}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 电量 -->\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<battery :level=\"batteryLevel\" :charging=\"batteryState === 2\"></battery>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 菜单层 -->\r\n\t\t<view class=\"menu\" :style=\"{height: `100%`, width: `${windowWidth}px`}\" v-if=\"menuShow\" @touchend=\"closeMenu\">\r\n\t\t\t<!-- 菜单层包含返回按钮的上半部分 -->\r\n\t\t\t<view class=\"menu-top\" :style=\"{height: `${statusBarHeight + 40}px`, top: itemShow ? 0 : `-100%`}\"\r\n\t\t\t\t@touchend.stop>\r\n\t\t\t\t<view :style=\"{height: `${statusBarHeight}px`}\"></view>\r\n\t\t\t\t<view class=\"head\">\r\n\t\t\t\t\t<!-- <text class=\"iconfont back\" @click=\"back\">&#xe71a;</text> -->\r\n\t\t\t\t\t<u-icon name=\"arrow-left\" size=\"25px\" class=\"iconfont back\" color=\"#fff\" @click=\"back\"></u-icon>\r\n\t\t\t\t\t<view style=\"margin-bottom: 12px;font-size: 14px;color: #eee;\">{{book.bookname}}</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t\t<!-- 菜单主体 -->\r\n\t\t\t<view class=\"menu-bottom\" :style=\"{bottom: itemShow ? 0 : '-100%'}\" @touchend.stop>\r\n\t\t\t\t<!-- 用于显示章节进度 -->\r\n\t\t\t\t<view class=\"show-chapter\" v-if=\"progressTouched\">{{directoryList[chapterProgress].name}}</view>\r\n\t\t\t\t<view class=\"show-chapter\" v-else>{{curChapter.chapterName}}</view>\r\n\r\n\t\t\t\t<!-- 章节进度条 -->\r\n\t\t\t\t<view class=\"progress-box\">\r\n\t\t\t\t\t<text @click=\"goPreChapter\">上一章</text>\r\n\t\t\t\t\t<view style=\"flex: 1;height: 100%;padding: 8px 0;\">\r\n\t\t\t\t\t\t<slider :value=\"curChapter.chapterIndex\" activeColor=\"#000\" :block-size=\"20\"\r\n\t\t\t\t\t\t\t:max=\"directoryList.length - 1\" @changing=\"slideChanging\" @change=\"slideChange\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text @click=\"goNextChapter\">下一章</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"items-box\">\r\n\t\t\t\t\t<view class=\"item-box\" @click=\"openDirectory\">\r\n\t\t\t\t\t\t<!-- <text class=\"iconfont\" style=\"font-size: 25px;\">&#xe601;</text> -->\r\n\t\t\t\t\t\t<u-icon name=\"list\" size=\"25px\" class=\"iconfont\" color=\"#efefef\"></u-icon>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">目录</text>\r\n\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"item-box\" @click=\"refreshPageData\">\r\n\t\t\t\t\t\t<!-- <text class=\"iconfont\" style=\"font-size: 25px;\">&#xe61d;</text> -->\r\n\t\t\t\t\t\t<u-icon name=\"reload\" size=\"25px\" class=\"iconfont\" color=\"#efefef\"></u-icon>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">刷新</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" v-if=\"background === 1\" @click=\"changeBackground(2)\">\r\n\t\t\t\t\t\t<!-- <text class=\"iconfont\" style=\"font-size: 25px;\">&#xe64c;</text> -->\r\n\t\t\t\t\t\t<u-icon name=\"eye\" size=\"25px\" class=\"iconfont\" color=\"#efefef\"></u-icon>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">日间</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" v-if=\"background === 2\" @click=\"changeBackground(1)\">\r\n\t\t\t\t\t\t<!-- <text class=\"iconfont\" style=\"font-size: 25px;\">&#xe63e;</text> -->\r\n\t\t\t\t\t\t<u-icon name=\"eye-off\" size=\"25px\" class=\"iconfont\" color=\"#efefef\"></u-icon>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">夜间</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-box\" @click=\"openSetting\">\r\n\t\t\t\t\t\t<!-- <text class=\"iconfont\" style=\"font-size: 25px;\">&#xe61d;</text> -->\r\n\t\t\t\t\t\t<u-icon name=\"setting\" size=\"25px\" class=\"iconfont\" color=\"#efefef\"></u-icon>\r\n\t\t\t\t\t\t<text style=\"font-size: 13px;\">设置</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"setting\" :style=\"{bottom: settingShow ? 0 : `-100%`}\" @touchend.stop>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">字号</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"bigSize\" v-if=\"fontSize<maxFontSize\">A+</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"color: #666; border: #666 solid 1px;\" v-else>A+</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"smallSize\" v-if=\"fontSize>minFontSize\">A-</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"color: #666;border: #666 solid 1px;\" v-else>A-</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"changeFont(2)\" v-if=\"simplified === 1\">繁體</view>\r\n\t\t\t\t\t<view class=\"icon\" @click=\"changeFont(1)\" v-else style=\"border: #FF9900 solid 1px;color: #FF9900\">繁體\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">排版</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{active: lineHeight === 1}\" @click=\"changeLineHeight(1)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{lineActive: lineHeight === 1}\" v-for=\"i in 5\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{active: lineHeight === 2}\" @click=\"changeLineHeight(2)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{lineActive: lineHeight === 2}\" v-for=\"i in 4\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"type-setting\" :class=\"{active: lineHeight === 3}\" @click=\"changeLineHeight(3)\">\r\n\t\t\t\t\t\t<view class=\"line\" :class=\"{lineActive: lineHeight === 3}\" v-for=\"i in 3\" :key=\"i\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">翻页</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{active: turnType === 0}\" style=\"padding: 5px 8px;\"\r\n\t\t\t\t\t\t@click=\"changeTurnType(0)\">覆盖</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{active: turnType === 1}\" style=\"padding: 5px 8px;\"\r\n\t\t\t\t\t\t@click=\"changeTurnType(1)\">左右平移</view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{active: turnType === 2}\" style=\"padding: 5px 8px;\"\r\n\t\t\t\t\t\t@click=\"changeTurnType(2)\">上下平移</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t<view class=\"item-name\">背景</view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"background: url(../../static/background1.jpg);\"\r\n\t\t\t\t\t\t:class=\"{active: background === 1}\" @click=\"changeBackground(1)\"></view>\r\n\t\t\t\t\t<view class=\"icon\" style=\"background-color: #000;\" :class=\"{active: background === 2}\"\r\n\t\t\t\t\t\t@click=\"changeBackground(2)\"></view>\r\n\t\t\t\t\t<view class=\"icon\" :class=\"{container2:true ,active: background === 3}\"\r\n\t\t\t\t\t\t@click=\"changeBackground(3)\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 目录层 -->\r\n\t\t\t<view class=\"directory\"\r\n\t\t\t\t:class=\"{container0: background === 1, container1: background === 2,container2: background === 3}\"\r\n\t\t\t\tv-if=\"directoryShowBefore\"\r\n\t\t\t\t:style=\"{left: directoryShow ? 0 : '-100%',color: `${colorList[background - 1]}`,boxShadow:'0 0 10px 0 rgba(0,0,0,.4)'}\"\r\n\t\t\t\t@touchend.stop>\r\n\r\n\t\t\t\t<view class=\"bookname\">{{book.bookname}}</view>\r\n\t\t\t\t<!--  :size=\"40\"——每一栏高度为40px  :scrollHeight=\"windowHeight - 60\"——书名的高度为60px -->\r\n\t\t\t\t<virtual-list :items=\"directoryList\" :size=\"40\" :remain=\"16\" :active=\"curChapter.chapterIndex\"\r\n\t\t\t\t\t:scrollHeight=\"windowHeight - 60\">\r\n\t\t\t\t\t<template v-slot=\"{item,active}\">\r\n\t\t\t\t\t\t<view class=\"directory-listItem\" :class=\"{active: item.index == active}\"\r\n\t\t\t\t\t\t\t:style=\"{color: directoryListItemColor(item.index)}\" @click=\"goToChapter(item.index)\">\r\n\t\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</virtual-list>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport battery from '../../components/battery.vue'\r\n\timport virtualList from '../../components/virtualList.vue'\r\n\timport {\r\n\t\ttraditionalized,\r\n\t\tsimplized,\r\n\t\tdateToStr\r\n\t} from '../../utils/utils.js'\r\n\t//引入HTML 文本解析器\r\n\timport HTMLParser from \"@/uni_modules/html-parser/js_sdk/index.js\"\r\n\timport store from \"@/store/index.js\"\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tbattery,\r\n\t\t\tvirtualList\r\n\t\t},\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbook: {},\r\n\t\t\t\tbookall: {},\r\n\t\t\t\tbookName: '我是书名',\r\n\t\t\t\tbookId: 0,\r\n\t\t\t\thistory: { //本书历史记录\r\n\t\t\t\t\tchapterIndex: 0,\r\n\t\t\t\t\tprogress: 0\r\n\t\t\t\t},\r\n\t\t\t\ttext: `<p>b站up:指针原来是套娃的</p>`,\r\n\t\t\t\tdirectoryList: [], //目录列表\r\n\t\t\t\tcurrentPage: 0, //当前页\r\n\t\t\t\trefreshData: false, //是否刷新\r\n\r\n\t\t\t\tinnerHeight: 0, //截取至整行的最大高度\r\n\r\n\t\t\t\tpreChapter: { //上一章数据\r\n\t\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\t\tchapterIndex: '',\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\ttotalPage: '',\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcurChapter: { //本一章数据\r\n\t\t\t\t\tchapterIndex: '',\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\ttotalPage: '',\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\tnextChapter: { //下一章数据\r\n\t\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\t\tchapterIndex: '',\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\ttotalPage: '',\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\ttmpChapter: { //暂存章节内容\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcover: { //封面的状态\r\n\t\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\t},\r\n\r\n\t\t\t\tprePage: { //上一页数据\r\n\t\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tpageNum: '',\r\n\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\tcurPage: { //本页数据\r\n\t\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tpageNum: 1,\r\n\t\t\t\t\ttotalPage: 1,\r\n\t\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\t\t\t\tnextPage: { //下一页数据\r\n\t\t\t\t\tready: false, //是否准备完毕\r\n\t\t\t\t\tchapterName: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tpageNum: '',\r\n\t\t\t\t\ttotalPage: '',\r\n\t\t\t\t\tpageTranslate: ['', '', ''], //页面位移，三个数对应三种翻页方式\r\n\t\t\t\t\tcanRead: true\r\n\t\t\t\t},\r\n\r\n\r\n\t\t\t\tnext: false, //用户是否正在翻下一页\r\n\t\t\t\tpre: false, //用户是否正在翻上一页\r\n\r\n\t\t\t\twaitForNext: false, //是否正在等待下一页准备完毕后跳转\r\n\t\t\t\twaitForPre: false, //是否正在等待上一页准备完毕后跳转\r\n\t\t\t\twaitForNextChapter: false, //是否正在等待下一章准备完毕后跳转\r\n\t\t\t\twaitForPreChapter: false, //是否正在等待上一章准备完毕后跳转\r\n\r\n\t\t\t\tshowAnimation: false, //是否开启动画\r\n\t\t\t\tshowShadow: false, //是否显示页面阴影\r\n\r\n\t\t\t\twindowWidth: 0, //可用屏幕宽度\r\n\t\t\t\twindowHeight: 0, //可用屏幕高度\r\n\t\t\t\tcontentHeight: 0, //阅读区域高度\r\n\r\n\t\t\t\tplatform: '', //设备\r\n\t\t\t\tbatteryState: '', //电池状态\r\n\t\t\t\tbatteryLevel: 100, //电量\r\n\t\t\t\tsystemTime: '', //系统时间\r\n\t\t\t\tsystemTimeStr: '', //系统时间字符串\r\n\t\t\t\tstatusBarHeight: 0, //状态栏高度\r\n\t\t\t\tpixelRatio: '', //设备像素比\r\n\t\t\t\t// 获取时间监听器\r\n\t\t\t\tIntervalTime: null,\r\n\r\n\t\t\t\ttouchStartX: 0, // 触屏起始点x\r\n\t\t\t\ttouchX: 0, // 瞬时触屏点x\r\n\t\t\t\tdelta: 0, // 手指瞬时位移\r\n\r\n\t\t\t\ttouchStartY: 0, // 触屏起始点y\r\n\t\t\t\ttouchY: 0, // 瞬时触屏点y\r\n\r\n\t\t\t\tmenuShow: false, //菜单栏box是否渲染\r\n\t\t\t\titemShow: false, // 菜单栏动画控制\r\n\t\t\t\tsettingShow: false, //设置栏动画控制\r\n\t\t\t\tdirectoryShow: false, //目录动画控制\r\n\t\t\t\tdirectoryShowBefore: false, // 目录渲染\r\n\t\t\t\tturnPageTime: .3, //翻页动画时间\r\n\r\n\t\t\t\tmaxFontSize: 30, //最大字体大小，px\r\n\t\t\t\tminFontSize: 12, //最小字体大小，px\r\n\t\t\t\tturnType: 0, //翻页方式\r\n\t\t\t\tfontSize: '', //字体大小，\r\n\t\t\t\tsimplified: '', //是否简体\r\n\t\t\t\tlineHeight: '', //行高，注意是fontSize的倍数\r\n\t\t\t\tbackground: '', //背景\r\n\t\t\t\tcolorList: ['#000', '#ccc', '#000'], //与背景对应的字体颜色\r\n\r\n\t\t\t\tchapterProgress: 0, //‘章节进度条’的参数\r\n\t\t\t\tprogressTouched: false //是否正在点击‘章节进度条’\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t//书籍对象由路由中传递的元素获取\r\n\t\t\t//传递的是bookShelfIndex和readIndex\r\n\t\t\tthis.book = this.$store.state.bookShelf[e.bookShelfIndex]\r\n\t\t\t// console.log(this.book);\r\n\t\t\t// this.book.readIndex = e.readIndex\r\n\t\t\t// 将更新的红点取消\r\n\t\t\tthis.$store.state.bookShelf[e.bookShelfIndex].isUpdated = false\r\n\r\n\t\t\t// 先迷惑用户\r\n\t\t\tthis.getSystemInfo();\r\n\t\t\t// this.initPage()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"正在努力加载缓存ing...\",\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\r\n\t\t\tconst key = 'bookall' + this.book.bookurl;\r\n\t\t\t// 使用异步读取缓存\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey: key,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.bookall = res.data;\r\n\t\t\t\t\tif (!this.bookall) {\r\n\t\t\t\t\t\t// 如果 this.bookall 是空的\r\n\t\t\t\t\t\t// console.log(\"缓存数据为空\");\r\n\r\n\t\t\t\t\t\t// // 走缓存中转一下，否则引用的是同一个对象\r\n\t\t\t\t\t\t// uni.setStorageSync(key, this.book);\r\n\t\t\t\t\t\t// // 使用同步读取！！\r\n\t\t\t\t\t\t// this.bookall = uni.getStorageSync(key);\r\n\r\n\t\t\t\t\t\t// 将 this.book 对象转换为字符串，然后再将其解析为一个新的对象，从而实现深拷贝\r\n\t\t\t\t\t\t// 这样就不走缓存了\r\n\t\t\t\t\t\tthis.bookall = JSON.parse(JSON.stringify(this.book));\r\n\t\t\t\t\t\tthis.bookall.progress = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// console.log(\"缓存数据不为空\");\r\n\t\t\t\t\t\t// console.log(this.bookall);\r\n\t\t\t\t\t\t// 在这里处理非空情况下的逻辑\r\n\t\t\t\t\t\t// 如果有新更新的，将新更新的添加进来\r\n\t\t\t\t\t\tif (this.book.readAll > this.bookall.readAll) {\r\n\t\t\t\t\t\t\tfor (let ri = this.bookall.readAll; ri < this.book.readAll; ri++) {\r\n\t\t\t\t\t\t\t\t// 添加新更新的章节\r\n\t\t\t\t\t\t\t\tconst newchap = this.book.chapters[ri];\r\n\t\t\t\t\t\t\t\tthis.bookall.chapters.push(newchap);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// 更新最大章数\r\n\t\t\t\t\t\t\tthis.bookall.readAll = this.book.readAll;\r\n\t\t\t\t\t\t\t// console.log(\"有新更新的章节\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t// 缓存读取失败的处理逻辑\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t// // 走缓存中转一下，否则引用的是同一个对象\r\n\t\t\t\t\t// uni.setStorageSync(key, this.book);\r\n\t\t\t\t\t// // 使用同步读取！！\r\n\t\t\t\t\t// this.bookall = uni.getStorageSync(key);\r\n\r\n\t\t\t\t\t// 这样就不走缓存了\r\n\t\t\t\t\tthis.bookall = JSON.parse(JSON.stringify(this.book));\r\n\t\t\t\t\tthis.bookall.progress = 0;\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t// 将这本书放到书架开头\r\n\t\t\t\t\tthis.$store.commit(\"moveBookshelfToLast\", e.bookShelfIndex)\r\n\r\n\t\t\t\t\t// 重新进行计算\r\n\t\t\t\t\tthis.getSystemInfo();\r\n\t\t\t\t\tthis.initPage()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 注册按键监听器，监听音量键\r\n\t\t\tplus.key.addEventListener(\"keydown\", this.handleKeyDown);\r\n\t\t\t// 注册长按监听器，监听音量键长按\r\n\t\t\tplus.key.addEventListener(\"longpressed\", this.handleLongpressed);\r\n\r\n\t\t\t// 设置时间监听器\r\n\t\t\tlet date = new Date();\r\n\t\t\tthis.systemTime = Date.parse(date);\r\n\t\t\tthis.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t// 每10S校正一次时间\r\n\t\t\tthis.IntervalTime = setInterval(() => {\r\n\t\t\t\t// this.systemTime += 60000;\r\n\t\t\t\t// this.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t\tlet date = new Date();\r\n\t\t\t\tthis.systemTime = Date.parse(date);\r\n\t\t\t\tthis.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t\t// console.log(this.systemTimeStr);\r\n\t\t\t}, 10000)\r\n\r\n\t\t},\r\n\t\tonShow() {\r\n\r\n\t\t},\r\n\t\t//组件被销毁\r\n\t\tonUnload() {\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\t// 退出全屏\r\n\t\t\tplus.navigator.setFullscreen(false)\r\n\t\t\t// #endif\r\n\r\n\t\t\t// this.setStorage()\r\n\t\t\t// console.log(\"组件被销毁\");\r\n\t\t\t// 移除按键监听器\r\n\t\t\tplus.key.removeEventListener(\"keydown\", this.handleKeyDown);\r\n\t\t\tplus.key.removeEventListener(\"longpressed\", this.handleLongpressed);\r\n\t\t\t// 移除监听器\r\n\t\t\tclearInterval(this.IntervalTime)\r\n\t\t},\r\n\t\t//组件被隐藏\r\n\t\tonHide() {\r\n\t\t\tthis.setStorage()\r\n\t\t\t// console.log(\"组件被隐藏\");\r\n\t\t},\r\n\t\t// 退出页面时的操作\r\n\t\tonBackPress(options) {\r\n\t\t\tthis.setStorage()\r\n\t\t\t// console.log(\"我退出啦！更新成功\");\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.initPage()\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\tprogress() { //章节的阅读进度\r\n\t\t\t\tif (this.curChapter.totalPage === 1) {\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t}\r\n\t\t\t\treturn this.currentPage / (this.curChapter.totalPage - 1)\r\n\t\t\t},\r\n\t\t\t//判断是否缓存过\r\n\t\t\tdirectoryListItemColor() {\r\n\t\t\t\treturn (index) => {\r\n\t\t\t\t\tif (this.bookall.chapters[index].hasOwnProperty('text')) {\r\n\t\t\t\t\t\t// 对象包含 text 属性\r\n\t\t\t\t\t\treturn ''; // 否则返回默认颜色\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 'gray'; // 如果index为-1，则返回灰色\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleKeyDown(e) {\r\n\t\t\t\t// console.log(e);\r\n\t\t\t\t//监控音量键并且不弹出音量加减动画\r\n\t\t\t\t//启用动画 不设置阴影\r\n\t\t\t\tthis.showAnimation = true\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\t// console.log(e);\r\n\t\t\t\tif (24 === e.keyCode) {\r\n\t\t\t\t\t// 音量+ 上一页\r\n\t\t\t\t\t// console.log(\"音量加，上一页\");\r\n\t\t\t\t\tthis.goPrePage();\r\n\t\t\t\t} else if (25 === e.keyCode) {\r\n\t\t\t\t\t// 音量- 下一页\r\n\t\t\t\t\t// console.log(\"音量减，下一页\");\r\n\t\t\t\t\tthis.goNextPage();\r\n\t\t\t\t}\r\n\t\t\t\tthis.next = false;\r\n\t\t\t\tthis.pre = false;\r\n\t\t\t},\r\n\r\n\t\t\thandleLongpressed(e) {\r\n\t\t\t\t// console.log(\"长按了键：\" + JSON.stringify(e));\r\n\t\t\t\t// console.log(\"长按了键：\" + e.keyCode);\r\n\t\t\t\t//监控音量键并且不弹出音量加减动画\r\n\t\t\t\t//启用动画 不设置阴影\r\n\t\t\t\tthis.showAnimation = true\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\tif (24 === e.keyCode) {\r\n\t\t\t\t\t// 音量+ 上一页\r\n\t\t\t\t\tthis.goPrePage();\r\n\t\t\t\t} else if (25 === e.keyCode) {\r\n\t\t\t\t\t// 音量- 下一页\r\n\t\t\t\t\tthis.goNextPage();\r\n\t\t\t\t}\r\n\t\t\t\tthis.next = false;\r\n\t\t\t\tthis.pre = false;\r\n\t\t\t},\r\n\r\n\t\t\tsetStorage() {\r\n\t\t\t\t// let history = uni.getStorageSync('history')\r\n\t\t\t\t// if (typeof history !== 'object') {\r\n\t\t\t\t// \thistory = []\r\n\t\t\t\t// }\r\n\t\t\t\t// let have = false\r\n\t\t\t\t// history.forEach((value) => {\r\n\t\t\t\t// \tif (value.bookId === this.bookId) {\r\n\t\t\t\t// \t\thave = true\r\n\t\t\t\t// \t\tvalue.chapterIndex = this.curChapter.chapterIndex\r\n\t\t\t\t// \t\tvalue.progress = this.progress\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t\t// if (!have) {\r\n\t\t\t\t// \thistory.push({\r\n\t\t\t\t// \t\tbookId: this.bookId,\r\n\t\t\t\t// \t\tchapterIndex: this.curChapter.chapterIndex,\r\n\t\t\t\t// \t\tprogress: this.progress\r\n\t\t\t\t// \t})\r\n\t\t\t\t// }\r\n\t\t\t\t// uni.setStorageSync('history', history)\r\n\r\n\t\t\t\t// 读到了这里\r\n\t\t\t\tthis.book.readIndex = this.curChapter.chapterIndex\r\n\t\t\t\tthis.bookall.readIndex = this.curChapter.chapterIndex\r\n\t\t\t\tthis.bookall.progress = this.progress\r\n\t\t\t\t// 更新\r\n\t\t\t\tthis.$store.commit('modifyBook', this.book)\r\n\t\t\t\t// 缓存小说数据\r\n\t\t\t\tconst key = 'bookall' + this.book.bookurl\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\tdata: this.bookall,\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\tconsole.log('缓存小说全部数据成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 返回上一页面\r\n\t\t\t **/\r\n\t\t\tback() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取设备信息\r\n\t\t\t **/\r\n\t\t\tgetSystemInfo() {\r\n\r\n\t\t\t\tconst {\r\n\t\t\t\t\twindowWidth,\r\n\t\t\t\t\twindowHeight,\r\n\t\t\t\t\tstatusBarHeight,\r\n\t\t\t\t\tplatform,\r\n\t\t\t\t\tpixelRatio\r\n\t\t\t\t} = uni.getSystemInfoSync()\r\n\t\t\t\t//获取一些必要的设备参数\r\n\t\t\t\tthis.statusBarHeight = statusBarHeight\r\n\t\t\t\tthis.windowWidth = windowWidth\r\n\t\t\t\tthis.windowHeight = windowHeight\r\n\t\t\t\tthis.pixelRatio = pixelRatio\r\n\t\t\t\tthis.platform = platform\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t// 全屏\r\n\t\t\t\tplus.navigator.setFullscreen(true)\r\n\t\t\t\t// 取消ios左滑返回\r\n\t\t\t\tlet page = this.$mp.page.$getAppWebview()\r\n\t\t\t\tpage.setStyle({\r\n\t\t\t\t\tpopGesture: 'none'\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (this.platform === 'ios') {\r\n\t\t\t\t\t// 获取ios电量\r\n\t\t\t\t\tlet UIDevice = plus.ios.import(\"UIDevice\")\r\n\t\t\t\t\tlet dev = UIDevice.currentDevice()\r\n\t\t\t\t\tif (!dev.isBatteryMonitoringEnabled()) {\r\n\t\t\t\t\t\tdev.setBatteryMonitoringEnabled(true)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetInterval(() => {\r\n\t\t\t\t\t\tthis.batteryState = dev.batteryState()\r\n\t\t\t\t\t\tthis.batteryLevel = dev.batteryLevel() * 100\r\n\t\t\t\t\t}, 1000)\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 获取安卓电量\r\n\t\t\t\t\tlet main = plus.android.runtimeMainActivity();\r\n\t\t\t\t\tlet Intent = plus.android.importClass('android.content.Intent');\r\n\t\t\t\t\tlet recevier = plus.android.implements(\r\n\t\t\t\t\t\t'io.dcloud.feature.internal.reflect.BroadcastReceiver', {\r\n\t\t\t\t\t\t\tonReceive: (context, intent) => {\r\n\t\t\t\t\t\t\t\tlet action = intent.getAction();\r\n\t\t\t\t\t\t\t\tif (action == Intent.ACTION_BATTERY_CHANGED) {\r\n\t\t\t\t\t\t\t\t\tthis.batteryState = intent.getIntExtra(\"status\", 0); //电池状态  \r\n\t\t\t\t\t\t\t\t\tthis.batteryLevel = intent.getIntExtra(\"level\", 0); //电量\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tlet IntentFilter = plus.android.importClass('android.content.IntentFilter');\r\n\t\t\t\t\tlet filter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);\r\n\t\t\t\t\tmain.registerReceiver(recevier, filter);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// // 设置时间\r\n\t\t\t\t// let date = new Date();\r\n\t\t\t\t// this.systemTime = Date.parse(date);\r\n\t\t\t\t// this.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t\t// // 每半分钟校正一次时间\r\n\t\t\t\t// this.IntervalTime = setInterval(() => {\r\n\t\t\t\t// \t// this.systemTime += 60000;\r\n\t\t\t\t// \t// this.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t\t// \tlet date = new Date();\r\n\t\t\t\t// \tthis.systemTime = Date.parse(date);\r\n\t\t\t\t// \tthis.systemTimeStr = dateToStr(this.systemTime);\r\n\t\t\t\t// \tconsole.log(this.systemTimeStr);\r\n\t\t\t\t// }, 10000)\r\n\r\n\r\n\t\t\t\t// 获取字体、排版等信息\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t/*****************************************/\r\n\r\n\t\t\t\t//可能缓存在前端可能从后端拿，如果是异步注意同步处理\r\n\t\t\t\tthis.fontSize = uni.getStorageSync('fontSize')\r\n\t\t\t\tif (typeof this.fontSize !== 'number') {\r\n\t\t\t\t\tthis.fontSize = 18\r\n\t\t\t\t}\r\n\t\t\t\tthis.simplified = uni.getStorageSync('simplified')\r\n\t\t\t\tif (typeof this.simplified !== 'number') {\r\n\t\t\t\t\tthis.simplified = 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.lineHeight = uni.getStorageSync('lineHeight')\r\n\t\t\t\tif (typeof this.lineHeight !== 'number') {\r\n\t\t\t\t\tthis.lineHeight = 2\r\n\t\t\t\t}\r\n\t\t\t\tthis.background = uni.getStorageSync('background')\r\n\t\t\t\tif (typeof this.background !== 'number') {\r\n\t\t\t\t\tthis.background = 1\r\n\t\t\t\t}\r\n\t\t\t\tthis.turnType = uni.getStorageSync('turnType')\r\n\t\t\t\tif (typeof this.turnType !== 'number') {\r\n\t\t\t\t\tthis.turnType = 0\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// let history = uni.getStorageSync('history')\r\n\t\t\t\t// if (typeof history !== 'object') {\r\n\t\t\t\t// \thistory = []\r\n\t\t\t\t// }\r\n\t\t\t\t// history.forEach((value) => {\r\n\t\t\t\t// \tif (value.bookId === this.bookId) {\r\n\t\t\t\t// \t\tthis.history = value\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\r\n\t\t\t\t// 找到看到了第几章的第几页\r\n\t\t\t\tthis.history = {\r\n\t\t\t\t\tchapterIndex: this.book.readIndex,\r\n\t\t\t\t\tprogress: this.bookall.progress\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取数据并计算页面\r\n\t\t\t **/\r\n\t\t\tasync initPage() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tawait this.calcHeight()\r\n\t\t\t\tawait this.getDirectoryList()\r\n\r\n\t\t\t\tif (this.history.chapterIndex > this.directoryList.length - 1 || !this.history\r\n\t\t\t\t\t.chapterIndex) {\r\n\t\t\t\t\tthis.history.chapterIndex = 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait this.getThreeChapter(this.history.chapterIndex)\r\n\t\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * this.history.progress)\r\n\t\t\t\tthis.goToPage(page)\r\n\t\t\t\tuni.hideLoading()\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 计算innerHeight，用于截取至整行\r\n\t\t\t **/\r\n\t\t\tcalcHeight() {\r\n\t\t\t\tif (this.contentHeight) {\r\n\t\t\t\t\tlet lineHeight = this.fontSize * this.lineHeight;\r\n\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\tlineHeight = Math.floor(lineHeight * this.pixelRatio) / this.pixelRatio\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tlet lineNum = Math.floor((this.contentHeight + Math.floor((lineHeight - this.fontSize) /\r\n\t\t\t\t\t\t\t2)) /\r\n\t\t\t\t\t\tlineHeight)\r\n\t\t\t\t\tthis.innerHeight = lineNum * lineHeight\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\t\tquery.select('#content').boundingClientRect(data => {\r\n\t\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t\tthis.contentHeight = height;\r\n\t\t\t\t\t\t\t\tlet lineHeight = this.fontSize * this.lineHeight;\r\n\r\n\t\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\t\tlineHeight = Math.floor(lineHeight * this.pixelRatio) /\r\n\t\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t\t\t.pixelRatio\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\tlet lineNum = Math.floor((height + Math.floor((\r\n\t\t\t\t\t\t\t\t\tlineHeight - this\r\n\t\t\t\t\t\t\t\t\t.fontSize) / 2)) / lineHeight)\r\n\t\t\t\t\t\t\t\tthis.innerHeight = lineNum * lineHeight\r\n\t\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 计算本章页数\r\n\t\t\t **/\r\n\t\t\tcalcCurChapter() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tquery.select('#curChapter').boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this\r\n\t\t\t\t\t\t\t\t.pixelRatio\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.curChapter.totalPage = Math.ceil(height / this\r\n\t\t\t\t\t\t\t\t.innerHeight) || 1\r\n\t\t\t\t\t\t\tthis.curChapter.ready = true //章节准备完毕\r\n\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t}, 100)\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 计算上一章页数,并翻页（如果有）\r\n\t\t\t **/\r\n\t\t\tcalcPreChapter() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tquery.select('#preChapter').boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this\r\n\t\t\t\t\t\t\t\t.pixelRatio\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.preChapter.totalPage = Math.ceil(height / this\r\n\t\t\t\t\t\t\t\t.innerHeight) || 1\r\n\t\t\t\t\t\t\tthis.preChapter.ready = true //章节准备完毕\r\n\t\t\t\t\t\t\tif (this.waitForPre) { //发生在用户翻至上一章，但是上一章数据未准备完毕时\r\n\t\t\t\t\t\t\t\tuni.hideLoading() //把loading关掉\r\n\t\t\t\t\t\t\t\tthis.waitForPre = false;\r\n\t\t\t\t\t\t\t\t//页面准备完毕\r\n\t\t\t\t\t\t\t\tthis.goPrePage()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.waitForPreChapter) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tthis.waitForPreChapter = false\r\n\t\t\t\t\t\t\t\tthis.goPreChapter()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t}, 100)\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 计算下一章页数,并翻页（如果有）\r\n\t\t\t **/\r\n\t\t\tcalcNextChapter() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// 此处setTimeout 100ms是为了确保元素渲染完毕从而获取正确高度，如果遇到页面页数计算不正确的情况可以增加时间试试看\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\t\t\tquery.select('#nextChapter').boundingClientRect(data => {\r\n\t\t\t\t\t\t\tlet height = data.height;\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || MP-WEIXIN\r\n\t\t\t\t\t\t\theight = Math.round(height * this.pixelRatio) / this\r\n\t\t\t\t\t\t\t\t.pixelRatio\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tthis.nextChapter.totalPage = Math.ceil(height / this\r\n\t\t\t\t\t\t\t\t.innerHeight) || 1\r\n\t\t\t\t\t\t\tthis.nextChapter.ready = true //章节准备完毕\r\n\t\t\t\t\t\t\tif (this.waitForNext) { //发生在用户翻至下一章，但是下一章数据未准备完毕时\r\n\t\t\t\t\t\t\t\tuni.hideLoading() //把loading关掉\r\n\t\t\t\t\t\t\t\tthis.waitForNext = false;\r\n\t\t\t\t\t\t\t\t//页面准备完毕\r\n\t\t\t\t\t\t\t\tthis.goNextPage()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.waitForNextChapter) {\r\n\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\tthis.waitForNextChapter = false\r\n\t\t\t\t\t\t\t\tthis.goNextChapter()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t}).exec();\r\n\r\n\t\t\t\t\t}, 100)\r\n\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸开始（封面）\r\n\t\t\t **/\r\n\t\t\tcoverTouchStart(e) {\r\n\t\t\t\tthis.showAnimation = false //关掉动画，否则翻页会很慢\r\n\t\t\t\tthis.touchX = e.touches[0].clientX\r\n\t\t\t\tthis.touchStartX = e.touches[0].clientX\r\n\t\t\t\tthis.touchY = e.touches[0].clientY\r\n\t\t\t\tthis.touchStartY = e.touches[0].clientY\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸（封面）\r\n\t\t\t **/\r\n\t\t\tcoverTouchMove(e) {\r\n\t\t\t\tthis.showShadow = true\r\n\t\t\t\tlet delta = 0\r\n\t\t\t\tif (this.turnType === 0 || this.turnType === 1) { //翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\t\tdelta = e.touches[0].clientX - this.touchStartX;\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > this.windowWidth) {\r\n\t\t\t\t\t\tdelta = this.windowWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (delta < -this.windowWidth) {\r\n\t\t\t\t\t\tdelta = -this.windowWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.delta = e.touches[0].clientX - this.touchX;\r\n\t\t\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\t\t} else { //翻页方式为‘上下平移’\r\n\t\t\t\t\tdelta = e.touches[0].clientY - this.touchStartY;\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > this.windowHeight) {\r\n\t\t\t\t\t\tdelta = this.windowHeight\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (delta < -this.windowHeight) {\r\n\t\t\t\t\t\tdelta = -this.windowHeight\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.delta = e.touches[0].clientY - this.touchY;\r\n\t\t\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.next) { //首次翻下一页之后\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > 0) {\r\n\t\t\t\t\t\tdelta = 0\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth + delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight + delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.pre && !this.next && delta < 0) { //首次翻下一页\r\n\t\t\t\t\tthis.next = true\r\n\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth + delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight + delta}px,)`\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tif (this.pre) { //首次右滑后，由于是封面不做任何操作\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.pre && !this.next && delta > 0) { //首次右滑\r\n\t\t\t\t\tthis.pre = true\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已经是第一页了',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸结束（封面）\r\n\t\t\t **/\r\n\t\t\tcoverTouchEnd(e) {\r\n\t\t\t\tthis.showAnimation = true\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\tlet delta = 0\r\n\t\t\t\tif (this.turnType === 0 || this.turnType === 1) { //翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\t\tdelta = e.changedTouches[0].clientX - this.touchStartX;\r\n\t\t\t\t} else { //翻页方式为‘上下平移’\r\n\t\t\t\t\tdelta = e.changedTouches[0].clientY - this.touchStartY;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta === 0) {\r\n\t\t\t\t\tif (e.changedTouches[0].clientX < this.windowWidth / 3) { //点击屏幕左1/3为上一页\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已经是第一页了',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (e.changedTouches[0].clientX > this.windowWidth / 3 * 2) { //点击屏幕右1/3为下一页\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t} else if (e.changedTouches[0].clientX <= this.windowWidth / 3 * 2 && e.changedTouches[0]\r\n\t\t\t\t\t\t.clientX >=\r\n\t\t\t\t\t\tthis.windowWidth / 3) { //点击屏幕中间1/3为呼出菜单\r\n\t\t\t\t\t\tthis.showMenu()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.next && this.delta <= 0) { //下一页\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t} else if (this.next && this.delta > 0) { //取消翻页\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.next = false\r\n\t\t\t\tthis.pre = false\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸取消（封面）\r\n\t\t\t **/\r\n\t\t\tcoverTouchcancel() {\r\n\r\n\t\t\t\t// 取消翻页\r\n\t\t\t\tthis.showAnimation = false\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(0,0)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.next = false\r\n\t\t\t\tthis.pre = false\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸开始\r\n\t\t\t **/\r\n\t\t\ttouchStart(e) {\r\n\t\t\t\tthis.showAnimation = false\r\n\t\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\t\tthis.touchStartX = e.touches[0].clientX;\r\n\t\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\t\tthis.touchStartY = e.touches[0].clientY;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸\r\n\t\t\t **/\r\n\t\t\ttouchMove(e) {\r\n\t\t\t\tthis.showShadow = true;\r\n\t\t\t\tlet delta = 0\r\n\t\t\t\tif (this.turnType === 0 || this.turnType === 1) { //翻页方式为‘覆盖’或者‘左右平移’\r\n\t\t\t\t\tdelta = e.touches[0].clientX - this.touchStartX;\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > this.windowWidth) {\r\n\t\t\t\t\t\tdelta = this.windowWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (delta < -this.windowWidth) {\r\n\t\t\t\t\t\tdelta = -this.windowWidth\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.delta = e.touches[0].clientX - this.touchX;\r\n\t\t\t\t\tthis.touchX = e.touches[0].clientX;\r\n\t\t\t\t} else { //翻页方式为‘上下平移’\r\n\t\t\t\t\tdelta = e.touches[0].clientY - this.touchStartY;\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > this.windowHeight) {\r\n\t\t\t\t\t\tdelta = this.windowHeight\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (delta < -this.windowHeight) {\r\n\t\t\t\t\t\tdelta = -this.windowHeight\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.delta = e.touches[0].clientY - this.touchY;\r\n\t\t\t\t\tthis.touchY = e.touches[0].clientY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.next && this.nextPage.ready) { //首次翻下一页之后\r\n\t\t\t\t\tif (this.nextPage.isEnd) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta > 0) {\r\n\t\t\t\t\t\tdelta = 0\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.pre && !this.next && delta < 0) { //首次翻下一页\r\n\t\t\t\t\tthis.next = true\r\n\t\t\t\t\tif (this.nextPage.ready) { //页面准备好了\r\n\t\t\t\t\t\tif (this.nextPage.isEnd) {\r\n\r\n\r\n\t\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t\t\t// \ttitle: '跳转推荐页',\r\n\t\t\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t\t\t/*****************************************/\r\n\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.nextChapter.ready) { //下一章已经准备好了\r\n\t\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\t\tready: this.nextChapter.ready,\r\n\t\t\t\t\t\t\tchapterName: this.nextChapter.chapterName,\r\n\t\t\t\t\t\t\ttext: this.nextChapter.text,\r\n\t\t\t\t\t\t\tpageNum: 0,\r\n\t\t\t\t\t\t\ttotalPage: this.nextChapter.totalPage,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tcanRead: this.nextChapter.canRead\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.pre && this.prePage.ready) { //首次翻上一页之后\r\n\r\n\t\t\t\t\t// 限制边界\r\n\t\t\t\t\tif (delta < 0) {\r\n\t\t\t\t\t\tdelta = 0\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.prePage.isCover) { //上一页是封面\r\n\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.pre && !this.next && delta > 0) { //首次翻上一页\r\n\r\n\t\t\t\t\tthis.pre = true\r\n\t\t\t\t\tif (this.prePage.ready) { //页面准备好了\r\n\t\t\t\t\t\tif (this.prePage.isCover) { //上一页是封面\r\n\r\n\t\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.preChapter.ready) { //上一章已经准备好了\r\n\t\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\t\tready: this.preChapter.ready,\r\n\t\t\t\t\t\t\tchapterName: this.preChapter.chapterName,\r\n\t\t\t\t\t\t\ttext: this.preChapter.text,\r\n\t\t\t\t\t\t\tpageNum: this.preChapter.totalPage - 1,\r\n\t\t\t\t\t\t\ttotalPage: this.preChapter.totalPage,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tcanRead: this.preChapter.canRead\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth+delta}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight+delta}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 触摸结束\r\n\t\t\t **/\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t\t// console.log(\"结束\");\r\n\t\t\t\tthis.showAnimation = true\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\tlet delta = 0\r\n\t\t\t\tif (this.turnType === 0 || this.turnType === 1) {\r\n\t\t\t\t\tdelta = e.changedTouches[0].clientX - this.touchStartX;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelta = e.changedTouches[0].clientY - this.touchStartY;\r\n\t\t\t\t}\r\n\t\t\t\tif (delta < 0.8 && delta > -0.8) { //部分手机点击屏幕时无法做到delta===0\r\n\t\t\t\t\tif (e.changedTouches[0].clientX < this.windowWidth / 3) { //点击屏幕左1/3为上一页\r\n\t\t\t\t\t\tthis.goPrePage()\r\n\t\t\t\t\t} else if (e.changedTouches[0].clientX > this.windowWidth / 3 * 2) { //点击屏幕右1/3为下一页\r\n\t\t\t\t\t\tthis.goNextPage()\r\n\t\t\t\t\t} else if (e.changedTouches[0].clientX <= this.windowWidth / 3 * 2 && e.changedTouches[0]\r\n\t\t\t\t\t\t.clientX >=\r\n\t\t\t\t\t\tthis.windowWidth / 3) { //点击屏幕中间1/3为呼出菜单\r\n\t\t\t\t\t\tthis.showMenu()\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.next && this.delta <= 0) { //下一页\r\n\t\t\t\t\t\tthis.goNextPage()\r\n\t\t\t\t\t} else if (this.next && this.delta > 0) { //取消翻页\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t} else if (this.pre && this.delta >= 0) { //上一页\r\n\t\t\t\t\t\tthis.goPrePage()\r\n\t\t\t\t\t} else if (this.pre && this.delta < 0) { //取消翻页\r\n\t\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.next = false\r\n\t\t\t\tthis.pre = false\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 取消触摸\r\n\t\t\t **/\r\n\t\t\ttouchcancel() {\r\n\r\n\t\t\t\t//取消翻页,重置页面\r\n\t\t\t\tthis.showAnimation = false\r\n\t\t\t\tthis.showShadow = false\r\n\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(0,0)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.next = false\r\n\t\t\t\tthis.pre = false\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 呼出菜单\r\n\t\t\t **/\r\n\t\t\tshowMenu() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.navigator.setFullscreen(false);\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.menuShow = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.itemShow = true\r\n\t\t\t\t}, 100)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 关闭菜单\r\n\t\t\t **/\r\n\t\t\tcloseMenu() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.itemShow = false\r\n\t\t\t\tthis.settingShow = false\r\n\t\t\t\tthis.directoryShow = false\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.directoryShowBefore = false\r\n\t\t\t\t\tthis.menuShow = false\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 重新加载，刷新数据\r\n\t\t\t **/\r\n\t\t\tasync refreshPageData() {\r\n\t\t\t\t// 启用刷新\r\n\t\t\t\tthis.refreshData = true\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\t//获取三页数据\r\n\t\t\t\tawait this.getThreeChapter(this.curChapter.chapterIndex)\r\n\t\t\t\t// // 取消加载\r\n\t\t\t\t// uni.hideLoading()\r\n\t\t\t\t// 跳转到第一页\r\n\t\t\t\tthis.goToPage(0);\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 关闭菜单栏，呼出设置栏\r\n\t\t\t **/\r\n\t\t\topenSetting() {\r\n\r\n\t\t\t\tthis.itemShow = false\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.settingShow = true\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 关闭菜单栏，呼出目录栏\r\n\t\t\t **/\r\n\t\t\topenDirectory() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.navigator.setFullscreen(true);\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.itemShow = false\r\n\t\t\t\tthis.directoryShowBefore = true\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.directoryShow = true\r\n\t\t\t\t}, 300)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 拖动进度条\r\n\t\t\t **/\r\n\t\t\tslideChanging(e) {\r\n\t\t\t\tthis.progressTouched = true\r\n\t\t\t\tthis.chapterProgress = e.detail.value\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 结束拖动进度条\r\n\t\t\t **/\r\n\t\t\tasync slideChange(e) {\r\n\r\n\t\t\t\tthis.chapterProgress = e.detail.value\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t})\r\n\t\t\t\tawait this.getThreeChapter(e.detail.value)\r\n\t\t\t\tthis.progressTouched = false\r\n\t\t\t\tthis.goToPage(0)\r\n\t\t\t\tuni.hideLoading()\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 上一页,页面轮换\r\n\t\t\t **/\r\n\t\t\tgoPrePage() {\r\n\r\n\t\t\t\tif (this.prePage.isCover) { //如果是首页\r\n\t\t\t\t\tthis.cover.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.prePage.ready && !this.preChapter.ready) {\r\n\t\t\t\t\tthis.waitForPre = true\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在准备上一章',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet showChapter = false\r\n\t\t\t\tthis.currentPage -= 1\r\n\t\t\t\tif (this.currentPage === -1) { //翻至上一章了\r\n\t\t\t\t\tshowChapter = true\r\n\t\t\t\t\tthis.currentPage = this.preChapter.totalPage - 1\r\n\t\t\t\t\tthis.chapterRotate('pre')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet cur = [].concat(this.curPage.pageTranslate)\r\n\t\t\t\tlet pre = [].concat(this.prePage.pageTranslate)\r\n\t\t\t\tthis.goToPage(this.currentPage)\r\n\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tthis.curPage.pageTranslate = pre\r\n\t\t\t\tthis.nextPage.pageTranslate = cur\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (showChapter) {\r\n\t\t\t\t\t\t// 弹出本章标题\r\n\t\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t\t// \ttitle: this.curChapter.chapterName,\r\n\t\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.showAnimation = true\r\n\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t}, 50)\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 下一页,页面轮换\r\n\t\t\t **/\r\n\t\t\tgoNextPage() {\r\n\t\t\t\tif (this.nextPage.isEnd) { //如果翻至本书末尾\r\n\r\n\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '后面没有啦',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\t/*****************************************/\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.nextPage.ready && !this.nextChapter.ready) {\r\n\t\t\t\t\tthis.waitForNext = true\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在准备下一章',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentPage += 1\r\n\t\t\t\tlet showChapter = false\r\n\t\t\t\tif (this.currentPage === this.curChapter.totalPage) { //翻至下一章了\r\n\t\t\t\t\tshowChapter = true\r\n\t\t\t\t\tthis.currentPage = 0\r\n\t\t\t\t\tthis.chapterRotate('next')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet cur = [].concat(this.curPage.pageTranslate)\r\n\t\t\t\tlet next = [].concat(this.nextPage.pageTranslate)\r\n\t\t\t\tthis.goToPage(this.currentPage)\r\n\t\t\t\tthis.prePage.pageTranslate = cur\r\n\t\t\t\tthis.curPage.pageTranslate = next\r\n\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t]\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (showChapter) {\r\n\t\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t\t// \ttitle: this.curChapter.chapterName,\r\n\t\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.showAnimation = true\r\n\t\t\t\t\tthis.prePage.pageTranslate = [\r\n\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.curPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t]\r\n\t\t\t\t\tthis.nextPage.pageTranslate = [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t]\r\n\t\t\t\t}, 50)\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 章节轮换\r\n\t\t\t **/\r\n\t\t\tasync chapterRotate(type) {\r\n\t\t\t\tif (type === 'next') {\r\n\t\t\t\t\tthis.preChapter = Object.assign({}, this.curChapter)\r\n\t\t\t\t\tthis.curChapter = Object.assign({}, this.nextChapter)\r\n\t\t\t\t\tif (this.curChapter.chapterIndex !== this.directoryList.length - 1) { //最后一章是根据目录列表长度判断\r\n\t\t\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\t\t\tready: false,\r\n\t\t\t\t\t\t\tchapterIndex: this.curChapter.chapterIndex + 1,\r\n\t\t\t\t\t\t\tchapterName: this.directoryList[this.curChapter.chapterIndex + 1].name,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait this.getOneChapter(this.directoryList[this.curChapter.chapterIndex + 1]\r\n\t\t\t\t\t\t\t.chapterId)\r\n\t\t\t\t\t\tthis.$set(this.nextChapter, 'text', this.tmpChapter.text)\r\n\t\t\t\t\t\tthis.$set(this.nextChapter, 'canRead', this.tmpChapter.canRead)\r\n\t\t\t\t\t\tthis.calcNextChapter()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\t\tisEnd: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (type === 'pre') {\r\n\t\t\t\t\tthis.nextChapter = Object.assign({}, this.curChapter)\r\n\t\t\t\t\tthis.curChapter = Object.assign({}, this.preChapter)\r\n\t\t\t\t\tif (this.curChapter.chapterIndex !== 0) {\r\n\t\t\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\t\t\tready: false,\r\n\t\t\t\t\t\t\tchapterIndex: this.curChapter.chapterIndex - 1,\r\n\t\t\t\t\t\t\tchapterName: this.directoryList[this.curChapter.chapterIndex - 1].name,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait this.getOneChapter(this.directoryList[this.curChapter.chapterIndex - 1]\r\n\t\t\t\t\t\t\t.chapterId)\r\n\t\t\t\t\t\tthis.$set(this.preChapter, 'text', this.tmpChapter.text)\r\n\t\t\t\t\t\tthis.$set(this.preChapter, 'canRead', this.tmpChapter.canRead)\r\n\t\t\t\t\t\tthis.calcPreChapter()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\t\tisCover: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 跳转下一章\r\n\t\t\t **/\r\n\t\t\tgoNextChapter() {\r\n\t\t\t\tif (this.curChapter.chapterIndex === this.directoryList.length - 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '已经是最后一章了',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.waitForNext || this.waitForPre) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.nextChapter.ready) {\r\n\t\t\t\t\tthis.chapterRotate('next')\r\n\t\t\t\t\tthis.goToPage(0)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在准备下一章'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.waitForNextChapter = true\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 跳转上一章\r\n\t\t\t **/\r\n\t\t\tgoPreChapter(page) {\r\n\t\t\t\tif (this.curChapter.chapterIndex === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '这是第一章',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.waitForNext || this.waitForPre) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.preChapter.ready) {\r\n\t\t\t\t\tthis.chapterRotate('pre')\r\n\t\t\t\t\tthis.goToPage(0)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在准备上一章'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.waitForPreChapter = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 根据页码跳转\r\n\t\t\t **/\r\n\t\t\tgoToPage(page) {\r\n\r\n\t\t\t\tthis.currentPage = page\r\n\t\t\t\tthis.showAnimation = false\r\n\t\t\t\tthis.curPage = {\r\n\t\t\t\t\tready: this.curChapter.ready,\r\n\t\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\t\tpageNum: this.currentPage,\r\n\t\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t`(0,0)`\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t\t}\r\n\t\t\t\tif (this.currentPage === 0) {\r\n\t\t\t\t\tif (this.preChapter.ready && this.preChapter.isCover) { //翻至封面了\r\n\t\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\t\tisCover: true,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\t\tready: this.preChapter.ready,\r\n\t\t\t\t\t\t\tchapterName: this.preChapter.chapterName,\r\n\t\t\t\t\t\t\ttext: this.preChapter.text,\r\n\t\t\t\t\t\t\tpageNum: this.preChapter.totalPage - 1,\r\n\t\t\t\t\t\t\ttotalPage: this.preChapter.totalPage,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tcanRead: this.preChapter.canRead\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.prePage = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\t\t\tpageNum: this.currentPage - 1,\r\n\t\t\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(${-this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${-this.windowHeight}px)`\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.currentPage >= this.curChapter.totalPage - 1) {\r\n\t\t\t\t\tif (this.nextChapter.ready && this.nextChapter.isEnd) { //翻至最后一章了\r\n\t\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\t\tisEnd: true,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\t\tready: this.nextChapter.ready,\r\n\t\t\t\t\t\t\tchapterName: this.nextChapter.chapterName,\r\n\t\t\t\t\t\t\ttext: this.nextChapter.text,\r\n\t\t\t\t\t\t\tpageNum: 0,\r\n\t\t\t\t\t\t\ttotalPage: this.nextChapter.totalPage,\r\n\t\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\tcanRead: this.nextChapter.canRead\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.nextPage = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tchapterName: this.curChapter.chapterName,\r\n\t\t\t\t\t\ttext: this.curChapter.text,\r\n\t\t\t\t\t\tpageNum: this.currentPage + 1,\r\n\t\t\t\t\t\ttotalPage: this.curChapter.totalPage,\r\n\t\t\t\t\t\tpageTranslate: [\r\n\t\t\t\t\t\t\t`(0,0)`,\r\n\t\t\t\t\t\t\t`(${this.windowWidth}px,0)`,\r\n\t\t\t\t\t\t\t`(0,${this.windowHeight}px)`\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tcanRead: this.curChapter.canRead\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 跳转到指定章节\r\n\t\t\t **/\r\n\t\t\tasync goToChapter(index) {\r\n\t\t\t\tthis.progressTouched = false\r\n\t\t\t\tthis.closeMenu()\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t})\r\n\t\t\t\tawait this.getThreeChapter(index)\r\n\t\t\t\tthis.goToPage(0)\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 加大字体\r\n\t\t\t **/\r\n\t\t\tasync bigSize() {\r\n\t\t\t\tlet progress = this.progress //记录阅读进度用于调整字体后跳转\r\n\t\t\t\tthis.fontSize += 2\r\n\t\t\t\tuni.setStorageSync('fontSize', this.fontSize)\r\n\t\t\t\tthis.calcHeight()\r\n\t\t\t\tawait this.calcCurChapter()\r\n\t\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress)\r\n\t\t\t\tthis.goToPage(page)\r\n\t\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\t\tthis.preChapter.ready = false\r\n\t\t\t\t\tawait this.calcPreChapter()\r\n\t\t\t\t}\r\n\t\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\t\tthis.nextChapter.ready = false\r\n\t\t\t\t\tawait this.calcNextChapter()\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 缩小字体\r\n\t\t\t **/\r\n\t\t\tasync smallSize() {\r\n\t\t\t\tlet progress = this.progress\r\n\t\t\t\tthis.fontSize -= 2\r\n\t\t\t\tuni.setStorageSync('fontSize', this.fontSize)\r\n\t\t\t\tthis.calcHeight()\r\n\t\t\t\tawait this.calcCurChapter()\r\n\t\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress)\r\n\t\t\t\tthis.goToPage(page)\r\n\t\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\t\tthis.preChapter.ready = false\r\n\t\t\t\t\tawait this.calcPreChapter()\r\n\t\t\t\t}\r\n\t\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\t\tthis.nextChapter.ready = false\r\n\t\t\t\t\tawait this.calcNextChapter()\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 切换繁体简体\r\n\t\t\t **/\r\n\t\t\tchangeFont(type) {\r\n\t\t\t\tif (type === 2) { //切换为繁体\r\n\t\t\t\t\tthis.preChapter.text = traditionalized(this.preChapter.text)\r\n\t\t\t\t\tthis.curChapter.text = traditionalized(this.curChapter.text)\r\n\t\t\t\t\tthis.nextChapter.text = traditionalized(this.nextChapter.text)\r\n\t\t\t\t\tthis.prePage.text = traditionalized(this.prePage.text)\r\n\t\t\t\t\tthis.curPage.text = traditionalized(this.curPage.text)\r\n\t\t\t\t\tthis.nextPage.text = traditionalized(this.nextPage.text)\r\n\t\t\t\t\tthis.simplified = 2\r\n\t\t\t\t\tuni.setStorageSync('simplified', 2)\r\n\t\t\t\t} else { //切换为简体\r\n\t\t\t\t\tthis.preChapter.text = simplized(this.preChapter.text)\r\n\t\t\t\t\tthis.curChapter.text = simplized(this.curChapter.text)\r\n\t\t\t\t\tthis.nextChapter.text = simplized(this.nextChapter.text)\r\n\t\t\t\t\tthis.prePage.text = simplized(this.prePage.text)\r\n\t\t\t\t\tthis.curPage.text = simplized(this.curPage.text)\r\n\t\t\t\t\tthis.nextPage.text = simplized(this.nextPage.text)\r\n\t\t\t\t\tthis.simplified = 1\r\n\t\t\t\t\tuni.setStorageSync('simplified', 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 改变行距\r\n\t\t\t **/\r\n\t\t\tasync changeLineHeight(lineHeight) {\r\n\t\t\t\tlet progress = this.progress\r\n\t\t\t\tif (lineHeight === this.lineHeight) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.lineHeight = lineHeight;\r\n\t\t\t\t\tuni.setStorageSync('lineHeight', this.lineHeight)\r\n\t\t\t\t\tthis.calcHeight()\r\n\t\t\t\t\tawait this.calcCurChapter()\r\n\t\t\t\t\tlet page = Math.floor((this.curChapter.totalPage - 1) * progress)\r\n\t\t\t\t\tthis.goToPage(page)\r\n\t\t\t\t\tif (this.preChapter.ready && !this.preChapter.isCover) {\r\n\t\t\t\t\t\tthis.preChapter.ready = false\r\n\t\t\t\t\t\tawait this.calcPreChapter()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.nextChapter.ready && !this.nextChapter.isEnd) {\r\n\t\t\t\t\t\tthis.nextChapter.ready = false\r\n\t\t\t\t\t\tawait this.calcNextChapter()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 改变翻页方式\r\n\t\t\t **/\r\n\t\t\tchangeTurnType(turnType) {\r\n\t\t\t\tif (turnType === this.turnType) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showAnimation = false\r\n\t\t\t\t\tthis.turnType = turnType;\r\n\t\t\t\t\tuni.setStorageSync('turnType', this.turnType)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 改变背景\r\n\t\t\t **/\r\n\t\t\tchangeBackground(background) {\r\n\t\t\t\t// console.log(background);\r\n\t\t\t\tif (background === this.background) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.background = background;\r\n\t\t\t\t\tuni.setStorageSync('background', this.background)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取目录\r\n\t\t\t **/\r\n\t\t\tgetDirectoryList(showLoading) {\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\tif (showLoading) {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//将章节赋值给章节列表\r\n\t\t\t\tconst chapters = this.book.chapters;\r\n\r\n\t\t\t\tfor (let i = 0; i < chapters.length; i++) {\r\n\t\t\t\t\tthis.directoryList.push({\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tchapterId: chapters[i].chapterurl, //注意：这个chapterId用于获取章节内容而不是index\r\n\t\t\t\t\t\tname: chapters[i].chaptername\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (showLoading) {\r\n\t\t\t\t\t//取消加载\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 购买书籍接口\r\n\t\t\t **/\r\n\t\t\tbuyBook() {\r\n\t\t\t\t// //在回调中调用this.initPage()刷新本页\r\n\t\t\t\t// uni.showToast({\r\n\t\t\t\t// \ttitle: '跳转至购买页面，如果未登陆则跳转登陆',\r\n\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取一章数据\r\n\t\t\t **/\r\n\t\t\tasync getOneChapter(chapterId, showLoading) {\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/**********    根据需要更改    ************/\r\n\t\t\t\t/*****************************************/\r\n\r\n\t\t\t\t// 加载的这章在哪个目录下\r\n\t\t\t\tlet chapindex = 0;\r\n\r\n\t\t\t\tfor (let i = 0; i < this.bookall.chapters.length; i++) {\r\n\t\t\t\t\tif (this.bookall.chapters[i].chapterurl === chapterId) {\r\n\t\t\t\t\t\tchapindex = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// const endindex = this.bookall.chapters.length - chapindex;\r\n\t\t\t\t// // 是否使用缓存数据\r\n\t\t\t\t// // 当有更新且当前章为最后十章的时候，不使用缓存数据，重新加载\r\n\t\t\t\t// const visend = this.book.isUpdated && endIndex < 10 ? false : true;\r\n\t\t\t\t// 存在，且不刷新\r\n\r\n\t\t\t\tif (this.bookall.chapters[chapindex].hasOwnProperty('text') && !this.refreshData) {\r\n\t\t\t\t\t// 对象包含 text 属性\r\n\t\t\t\t\t//直接用\r\n\t\t\t\t\tthis.text = this.bookall.chapters[chapindex].text\r\n\t\t\t\t\t//文本\r\n\t\t\t\t\tthis.tmpChapter.text = this.text\r\n\t\t\t\t\t// 设置可读\r\n\t\t\t\t\tthis.tmpChapter.canRead = true\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 对象不包含 text 属性\r\n\t\t\t\t\tif (showLoading) {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '加载中',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst originF = this.bookall.origin\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst getText = await this.$getNetwork.read(originF, chapterId)\r\n\t\t\t\t\tif (-1 == getText) {\r\n\t\t\t\t\t\tconsole.log(\"网络请求错误\");\r\n\t\t\t\t\t\t//取消加载\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取章节错误，请检查网络状态',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t//文本\r\n\t\t\t\t\t\tthis.tmpChapter.text = ''\r\n\t\t\t\t\t\t// 设置可读\r\n\t\t\t\t\t\tthis.tmpChapter.canRead = true\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// this.text = getText\r\n\t\t\t\t\t\t//文本\r\n\t\t\t\t\t\tthis.tmpChapter.text = getText\r\n\t\t\t\t\t\t// 设置可读\r\n\t\t\t\t\t\tthis.tmpChapter.canRead = true\r\n\r\n\t\t\t\t\t\tif (this.simplified === 2) { //切换为繁体  注意：这里默认数据库中是简体字\r\n\t\t\t\t\t\t\tthis.tmpChapter.text = traditionalized(this.tmpChapter.text)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//缓存添加文本，最重要！！！！！！\r\n\t\t\t\t\t\tthis.bookall.chapters[chapindex]['text'] = this.tmpChapter.text;\r\n\t\t\t\t\t\t//标记为已经下载\r\n\t\t\t\t\t\tthis.book.chapters[chapindex].visD = true;\r\n\t\t\t\t\t\tthis.text = \"\"\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// //取消加载(等计算页面信息后再取消)\r\n\t\t\t\t// uni.hideLoading()\r\n\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t\t/*****************************************/\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取三章数据\r\n\t\t\t **/\r\n\t\t\tasync getThreeChapter(index) {\r\n\r\n\t\t\t\t// 获取当前章节的内容\r\n\t\t\t\tawait this.getOneChapter(this.directoryList[index].chapterId);\r\n\t\t\t\tthis.curChapter = {\r\n\t\t\t\t\tchapterIndex: index,\r\n\t\t\t\t\tchapterName: this.directoryList[index].name,\r\n\t\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 获取上一章节的内容\r\n\t\t\t\tif (this.curChapter.chapterIndex !== 0) {\r\n\t\t\t\t\tawait this.getOneChapter(this.directoryList[index - 1].chapterId);\r\n\t\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\t\tchapterIndex: index - 1,\r\n\t\t\t\t\t\tchapterName: this.directoryList[index - 1].name,\r\n\t\t\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 当当前章节是第一章时，设置上一章节为封面或空白\r\n\t\t\t\t\tthis.preChapter = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tisCover: true\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 获取下一章节的内容\r\n\t\t\t\tif (this.curChapter.chapterIndex !== this.directoryList.length - 1) {\r\n\t\t\t\t\tawait this.getOneChapter(this.directoryList[index + 1].chapterId);\r\n\t\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\t\tchapterIndex: index + 1,\r\n\t\t\t\t\t\tchapterName: this.directoryList[index + 1].name,\r\n\t\t\t\t\t\ttext: this.tmpChapter.text,\r\n\t\t\t\t\t\tcanRead: this.tmpChapter.canRead\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 当当前章节是最后一章时，设置下一章节为结束标识或空白\r\n\t\t\t\t\tthis.nextChapter = {\r\n\t\t\t\t\t\tready: true,\r\n\t\t\t\t\t\tisEnd: true\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 计算当前章节的相关信息\r\n\t\t\t\tawait this.calcCurChapter();\r\n\t\t\t\t// 计算上一章节的相关信息\r\n\t\t\t\tawait this.calcPreChapter();\r\n\t\t\t\t// 计算下一章节的相关信息\r\n\t\t\t\tawait this.calcNextChapter();\r\n\r\n\t\t\t\t// 加载完毕，不使用刷新\r\n\t\t\t\tthis.refreshData = false\r\n\t\t\t\t// 取消加载\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.hidden {\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t.action {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\r\n\t\t.item {\r\n\t\t\tflex: 1;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.container {\r\n\t\tposition: fixed;\r\n\t\t// 连续英文换行\r\n\t\tword-break: break-all;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 0px 20px;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #fff;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.chapter {\r\n\t\t\tpadding-top: 30px;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tcolor: $minor-text-color;\r\n\t\t\theight: 30px;\r\n\t\t\twidth: 100%;\r\n\t\t\tline-height: 20px;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\t/* 或者 block */\r\n\t\t\t-webkit-line-clamp: 1;\r\n\t\t\t-webkit-box-orient: vertical;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\t// overflow: hidden;\r\n\t\t}\r\n\r\n\t\t.bottom-bar {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tcolor: $minor-text-color;\r\n\t\t\theight: 30px;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tmargin-top: 30px;\r\n\t\t\tmargin-bottom: 5px;\r\n\t\t\tflex: 1 1 auto;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t.inner-box {\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t.book-inner {\r\n\t\t\t\t\ttext-indent: 2em;\r\n\t\t\t\t\ttext-align: justify;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.container0 {\r\n\t\tbackground: url(../../static/background1.jpg);\r\n\t\tbackground-color: #fff;\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\r\n\t.container1 {\r\n\t\tbackground-color: #000;\r\n\t}\r\n\r\n\t.container2 {\r\n\t\tbackground-color: #97BF18;\r\n\t}\r\n\r\n\t.menu {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 300;\r\n\r\n\t\t// transition: all .3s;\r\n\t\t.menu-top {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #333;\r\n\t\t\ttransition: top .3s;\r\n\r\n\t\t\t.head {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 40px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tline-height: 40px;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\r\n\t\t\t.back {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\tleft: 10px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.directory {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-flow: column;\r\n\t\t\twidth: 550rpx;\r\n\t\t\theight: 100%;\r\n\t\t\ttransition: left .4s;\r\n\r\n\t\t\t.bookname {\r\n\t\t\t\tpadding: 20px 0 20px 10px;\r\n\t\t\t\theight: 60px;\r\n\t\t\t\tfont-size: 18px;\r\n\t\t\t}\r\n\r\n\t\t\t// 目录样式\r\n\t\t\t.directory-listItem {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding-left: 10px;\r\n\t\t\t\theight: 50px;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\t// border-bottom: #eee solid 1px;\r\n\t\t\t}\r\n\r\n\t\t\t.active {\r\n\t\t\t\tcolor: #E5363D\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.menu-bottom {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 0;\r\n\t\t\twidth: 100%;\r\n\t\t\tbackground-color: #333;\r\n\t\t\ttransition: bottom .3s;\r\n\t\t\tcolor: #fff;\r\n\r\n\t\t\t.show-chapter {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\ttransform: translate(-50%, -110%);\r\n\t\t\t\tpadding: 5px 10px;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tbackground-color: #333;\r\n\t\t\t}\r\n\r\n\t\t\t.progress-box {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 0 20px;\r\n\t\t\t\theight: 50px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tfont-size: 15px;\r\n\t\t\t}\r\n\r\n\t\t\t.items-box {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t// padding-top: 20px;\r\n\t\t\t\theight: 80px;\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t.item-box {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-flow: column;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.setting {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 0;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\tpadding: 10px 20px;\r\n\t\t\twidth: 100%;\r\n\t\t\tcolor: #fff;\r\n\t\t\tbackground-color: #333;\r\n\t\t\ttransition: bottom .3s;\r\n\r\n\t\t\t.item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 70px;\r\n\r\n\t\t\t\t.item-name {\r\n\t\t\t\t\tpadding: 10px;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.icon {\r\n\t\t\t\t\tmargin-right: 10px;\r\n\t\t\t\t\tpadding: 5px 20px;\r\n\t\t\t\t\tfont-size: 15px;\r\n\t\t\t\t\theight: 32px;\r\n\t\t\t\t\tline-height: 20px;\r\n\t\t\t\t\twidth: auto;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tborder-radius: 20px;\r\n\t\t\t\t\tborder: #fff solid 1px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.type-setting {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tjustify-content: space-around;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tmargin-right: 10px;\r\n\t\t\t\t\tpadding: 5px;\r\n\t\t\t\t\theight: 30px;\r\n\t\t\t\t\twidth: 30px;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t\tborder: #fff solid 1px;\r\n\r\n\t\t\t\t\t.line {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder-bottom: #fff solid 1px;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.lineActive {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\tborder-bottom: #FF9900 solid 1px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.active {\r\n\t\t\t\t\tcolor: #FF9900;\r\n\t\t\t\t\tborder: #FF9900 solid 1px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.cover {\r\n\t\timage {\r\n\t\t\theight: 400rpx;\r\n\t\t\twidth: 300rpx;\r\n\t\t\tbackground-color: #eee;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookRead.vue?vue&type=style&index=0&id=31379966&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookRead.vue?vue&type=style&index=0&id=31379966&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1714955546953\n      var cssReload = require(\"D:/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookHomepage.vue?vue&type=style&index=0&id=85769d34&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./bookHomepage.vue?vue&type=style&index=0&id=85769d34&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1714955546708\n      var cssReload = require(\"D:/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}